(()=>{var e={};e.id=11,e.ids=[11],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4303:(e,t,r)=>{Promise.resolve().then(r.bind(r,13212))},8086:e=>{"use strict";e.exports=require("module")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11033:()=>{},11997:e=>{"use strict";e.exports=require("punycode")},13212:(e,t,r)=>{"use strict";let n;r.r(t),r.d(t,{default:()=>tJ});var i,s,o=r(56877),a=r(9048),l=r(28484);let u="rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1";class c{color;from;to;piece;captured;promotion;flags;san;lan;before;after;constructor(e,t){let{color:r,piece:n,from:i,to:s,flags:o,captured:a,promotion:l}=t,u=j(i),c=j(s);for(let i in this.color=r,this.piece=n,this.from=u,this.to=c,this.san=e._moveToSan(t,e._moves({legal:!0})),this.lan=u+c,this.before=e.fen(),e._makeMove(t),this.after=e.fen(),e._undoMove(),this.flags="",h)h[i]&o&&(this.flags+=d[i]);a&&(this.captured=a),l&&(this.promotion=l,this.lan+=l)}isCapture(){return this.flags.indexOf(d.CAPTURE)>-1}isPromotion(){return this.flags.indexOf(d.PROMOTION)>-1}isEnPassant(){return this.flags.indexOf(d.EP_CAPTURE)>-1}isKingsideCastle(){return this.flags.indexOf(d.KSIDE_CASTLE)>-1}isQueensideCastle(){return this.flags.indexOf(d.QSIDE_CASTLE)>-1}isBigPawn(){return this.flags.indexOf(d.BIG_PAWN)>-1}}let d={NORMAL:"n",CAPTURE:"c",BIG_PAWN:"b",EP_CAPTURE:"e",PROMOTION:"p",KSIDE_CASTLE:"k",QSIDE_CASTLE:"q"},h={NORMAL:1,CAPTURE:2,BIG_PAWN:4,EP_CAPTURE:8,PROMOTION:16,KSIDE_CASTLE:32,QSIDE_CASTLE:64},g={Event:"?",Site:"?",Date:"????.??.??",Round:"?",White:"?",Black:"?",Result:"*"},f={...g,WhiteTitle:null,BlackTitle:null,WhiteElo:null,BlackElo:null,WhiteUSCF:null,BlackUSCF:null,WhiteNA:null,BlackNA:null,WhiteType:null,BlackType:null,EventDate:null,EventSponsor:null,Section:null,Stage:null,Board:null,Opening:null,Variation:null,SubVariation:null,ECO:null,NIC:null,Time:null,UTCTime:null,UTCDate:null,TimeControl:null,SetUp:null,FEN:null,Termination:null,Annotator:null,Mode:null,PlyCount:null},p={a8:0,b8:1,c8:2,d8:3,e8:4,f8:5,g8:6,h8:7,a7:16,b7:17,c7:18,d7:19,e7:20,f7:21,g7:22,h7:23,a6:32,b6:33,c6:34,d6:35,e6:36,f6:37,g6:38,h6:39,a5:48,b5:49,c5:50,d5:51,e5:52,f5:53,g5:54,h5:55,a4:64,b4:65,c4:66,d4:67,e4:68,f4:69,g4:70,h4:71,a3:80,b3:81,c3:82,d3:83,e3:84,f3:85,g3:86,h3:87,a2:96,b2:97,c2:98,d2:99,e2:100,f2:101,g2:102,h2:103,a1:112,b1:113,c1:114,d1:115,e1:116,f1:117,g1:118,h1:119},v={b:[16,32,17,15],w:[-16,-32,-17,-15]},m={n:[-18,-33,-31,-14,18,33,31,14],b:[-17,-15,17,15],r:[-16,1,16,-1],q:[-17,-16,-15,1,17,16,15,-1],k:[-17,-16,-15,1,17,16,15,-1]},b=[20,0,0,0,0,0,0,24,0,0,0,0,0,0,20,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,24,24,24,24,24,24,56,0,56,24,24,24,24,24,24,0,0,0,0,0,0,2,53,56,53,2,0,0,0,0,0,0,0,0,0,0,0,20,2,24,2,20,0,0,0,0,0,0,0,0,0,0,20,0,0,24,0,0,20,0,0,0,0,0,0,0,0,20,0,0,0,24,0,0,0,20,0,0,0,0,0,0,20,0,0,0,0,24,0,0,0,0,20,0,0,0,0,20,0,0,0,0,0,24,0,0,0,0,0,20,0,0,20,0,0,0,0,0,0,24,0,0,0,0,0,0,20],y=[17,0,0,0,0,0,0,16,0,0,0,0,0,0,15,0,0,17,0,0,0,0,0,16,0,0,0,0,0,15,0,0,0,0,17,0,0,0,0,16,0,0,0,0,15,0,0,0,0,0,0,17,0,0,0,16,0,0,0,15,0,0,0,0,0,0,0,0,17,0,0,16,0,0,15,0,0,0,0,0,0,0,0,0,0,17,0,16,0,15,0,0,0,0,0,0,0,0,0,0,0,0,17,16,15,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,-1,-1,-1,-1,-1,-1,-1,0,0,0,0,0,0,0,-15,-16,-17,0,0,0,0,0,0,0,0,0,0,0,0,-15,0,-16,0,-17,0,0,0,0,0,0,0,0,0,0,-15,0,0,-16,0,0,-17,0,0,0,0,0,0,0,0,-15,0,0,0,-16,0,0,0,-17,0,0,0,0,0,0,-15,0,0,0,0,-16,0,0,0,0,-17,0,0,0,0,-15,0,0,0,0,0,-16,0,0,0,0,0,-17,0,0,-15,0,0,0,0,0,0,-16,0,0,0,0,0,0,-17],w={p:1,n:2,b:4,r:8,q:16,k:32},C=["n","b","r","q"],x={k:h.KSIDE_CASTLE,q:h.QSIDE_CASTLE},S={w:[{square:p.a1,flag:h.QSIDE_CASTLE},{square:p.h1,flag:h.KSIDE_CASTLE}],b:[{square:p.a8,flag:h.QSIDE_CASTLE},{square:p.h8,flag:h.KSIDE_CASTLE}]},O={b:1,w:6},_=["1-0","0-1","1/2-1/2","*"];function E(e){return -1!=="0123456789".indexOf(e)}function j(e){let t=15&e,r=e>>4;return"abcdefgh".substring(t,t+1)+"87654321".substring(r,r+1)}function k(e){return"w"===e?"b":"w"}function D(e,t,r,n,i,s,o=h.NORMAL){let a=n>>4;if("p"===i&&(7===a||0===a))for(let a=0;a<C.length;a++){let l=C[a];e.push({color:t,from:r,to:n,piece:i,captured:s,promotion:l,flags:o|h.PROMOTION})}else e.push({color:t,from:r,to:n,piece:i,captured:s,flags:o})}function T(e){let t=e.charAt(0);if(t>="a"&&t<="h"){if(e.match(/[a-h]\d.*[a-h]\d/))return;return"p"}return"o"===(t=t.toLowerCase())?"k":t}function I(e){return e.replace(/=/,"").replace(/[+#]?[?!]*$/,"")}function L(e){return e.split(" ").slice(0,4).join(" ")}class P{_board=Array(128);_turn="w";_header={};_kings={w:-1,b:-1};_epSquare=-1;_halfMoves=0;_moveNumber=0;_history=[];_comments={};_castling={w:0,b:0};_positionCount={};constructor(e=u,{skipValidation:t=!1}={}){this.load(e,{skipValidation:t})}clear({preserveHeaders:e=!1}={}){this._board=Array(128),this._kings={w:-1,b:-1},this._turn="w",this._castling={w:0,b:0},this._epSquare=-1,this._halfMoves=0,this._moveNumber=1,this._history=[],this._comments={},this._header=e?this._header:{...f},this._positionCount={},this._header.SetUp=null,this._header.FEN=null}load(e,{skipValidation:t=!1,preserveHeaders:r=!1}={}){let n=e.split(/\s+/);if(n.length>=2&&n.length<6&&(e=n.concat(["-","-","0","1"].slice(-(6-n.length))).join(" ")),n=e.split(/\s+/),!t){let{ok:t,error:r}=function(e){let t=e.split(/\s+/);if(6!==t.length)return{ok:!1,error:"Invalid FEN: must contain six space-delimited fields"};let r=parseInt(t[5],10);if(isNaN(r)||r<=0)return{ok:!1,error:"Invalid FEN: move number must be a positive integer"};let n=parseInt(t[4],10);if(isNaN(n)||n<0)return{ok:!1,error:"Invalid FEN: half move counter number must be a non-negative integer"};if(!/^(-|[abcdefgh][36])$/.test(t[3]))return{ok:!1,error:"Invalid FEN: en-passant square is invalid"};if(/[^kKqQ-]/.test(t[2]))return{ok:!1,error:"Invalid FEN: castling availability is invalid"};if(!/^(w|b)$/.test(t[1]))return{ok:!1,error:"Invalid FEN: side-to-move is invalid"};let i=t[0].split("/");if(8!==i.length)return{ok:!1,error:"Invalid FEN: piece data does not contain 8 '/'-delimited rows"};for(let e=0;e<i.length;e++){let t=0,r=!1;for(let n=0;n<i[e].length;n++)if(E(i[e][n])){if(r)return{ok:!1,error:"Invalid FEN: piece data is invalid (consecutive number)"};t+=parseInt(i[e][n],10),r=!0}else{if(!/^[prnbqkPRNBQK]$/.test(i[e][n]))return{ok:!1,error:"Invalid FEN: piece data is invalid (invalid piece)"};t+=1,r=!1}if(8!==t)return{ok:!1,error:"Invalid FEN: piece data is invalid (too many squares in rank)"}}if("3"==t[3][1]&&"w"==t[1]||"6"==t[3][1]&&"b"==t[1])return{ok:!1,error:"Invalid FEN: illegal en-passant square"};for(let{color:e,regex:r}of[{color:"white",regex:/K/g},{color:"black",regex:/k/g}]){if(!r.test(t[0]))return{ok:!1,error:`Invalid FEN: missing ${e} king`};if((t[0].match(r)||[]).length>1)return{ok:!1,error:`Invalid FEN: too many ${e} kings`}}return Array.from(i[0]+i[7]).some(e=>"P"===e.toUpperCase())?{ok:!1,error:"Invalid FEN: some pawns are on the edge rows"}:{ok:!0}}(e);if(!t)throw Error(r)}let i=n[0],s=0;this.clear({preserveHeaders:r});for(let e=0;e<i.length;e++){let t=i.charAt(e);if("/"===t)s+=8;else if(E(t))s+=parseInt(t,10);else{let e=t<"a"?"w":"b";this._put({type:t.toLowerCase(),color:e},j(s)),s++}}this._turn=n[1],n[2].indexOf("K")>-1&&(this._castling.w|=h.KSIDE_CASTLE),n[2].indexOf("Q")>-1&&(this._castling.w|=h.QSIDE_CASTLE),n[2].indexOf("k")>-1&&(this._castling.b|=h.KSIDE_CASTLE),n[2].indexOf("q")>-1&&(this._castling.b|=h.QSIDE_CASTLE),this._epSquare="-"===n[3]?-1:p[n[3]],this._halfMoves=parseInt(n[4],10),this._moveNumber=parseInt(n[5],10),this._updateSetup(e),this._incPositionCount(e)}fen(){let e=0,t="";for(let r=p.a8;r<=p.h1;r++){if(this._board[r]){e>0&&(t+=e,e=0);let{color:n,type:i}=this._board[r];t+="w"===n?i.toUpperCase():i.toLowerCase()}else e++;r+1&136&&(e>0&&(t+=e),r!==p.h1&&(t+="/"),e=0,r+=8)}let r="";this._castling.w&h.KSIDE_CASTLE&&(r+="K"),this._castling.w&h.QSIDE_CASTLE&&(r+="Q"),this._castling.b&h.KSIDE_CASTLE&&(r+="k"),this._castling.b&h.QSIDE_CASTLE&&(r+="q"),r=r||"-";let n="-";if(-1!==this._epSquare){let e=this._epSquare+("w"===this._turn?16:-16);for(let t of[e+1,e-1]){if(136&t)continue;let e=this._turn;if(this._board[t]?.color===e&&this._board[t]?.type==="p"){this._makeMove({color:e,from:t,to:this._epSquare,piece:"p",captured:"p",flags:h.EP_CAPTURE});let r=!this._isKingAttacked(e);if(this._undoMove(),r){n=j(this._epSquare);break}}}}return[t,this._turn,r,n,this._halfMoves,this._moveNumber].join(" ")}_updateSetup(e){this._history.length>0||(e!==u?(this._header.SetUp="1",this._header.FEN=e):(this._header.SetUp=null,this._header.FEN=null))}reset(){this.load(u)}get(e){return this._board[p[e]]}findPiece(e){let t=[];for(let r=p.a8;r<=p.h1;r++){if(136&r){r+=7;continue}this._board[r]&&this._board[r]?.color===e.color&&this._board[r].color===e.color&&this._board[r].type===e.type&&t.push(j(r))}return t}put({type:e,color:t},r){return!!this._put({type:e,color:t},r)&&(this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),!0)}_put({type:e,color:t},r){if(-1==="pnbrqkPNBRQK".indexOf(e.toLowerCase())||!(r in p))return!1;let n=p[r];if("k"==e&&-1!=this._kings[t]&&this._kings[t]!=n)return!1;let i=this._board[n];return i&&"k"===i.type&&(this._kings[i.color]=-1),this._board[n]={type:e,color:t},"k"===e&&(this._kings[t]=n),!0}remove(e){let t=this.get(e);return delete this._board[p[e]],t&&"k"===t.type&&(this._kings[t.color]=-1),this._updateCastlingRights(),this._updateEnPassantSquare(),this._updateSetup(this.fen()),t}_updateCastlingRights(){let e=this._board[p.e1]?.type==="k"&&this._board[p.e1]?.color==="w",t=this._board[p.e8]?.type==="k"&&this._board[p.e8]?.color==="b";e&&this._board[p.a1]?.type==="r"&&this._board[p.a1]?.color==="w"||(this._castling.w&=~h.QSIDE_CASTLE),e&&this._board[p.h1]?.type==="r"&&this._board[p.h1]?.color==="w"||(this._castling.w&=~h.KSIDE_CASTLE),t&&this._board[p.a8]?.type==="r"&&this._board[p.a8]?.color==="b"||(this._castling.b&=~h.QSIDE_CASTLE),t&&this._board[p.h8]?.type==="r"&&this._board[p.h8]?.color==="b"||(this._castling.b&=~h.KSIDE_CASTLE)}_updateEnPassantSquare(){if(-1===this._epSquare)return;let e=this._epSquare+("w"===this._turn?-16:16),t=this._epSquare+("w"===this._turn?16:-16);if(null!==this._board[e]||null!==this._board[this._epSquare]||this._board[t]?.color!==k(this._turn)||this._board[t]?.type!=="p"){this._epSquare=-1;return}[t+1,t-1].some(e=>!(136&e)&&this._board[e]?.color===this._turn&&this._board[e]?.type==="p")||(this._epSquare=-1)}_attacked(e,t,r){let n=[];for(let i=p.a8;i<=p.h1;i++){if(136&i){i+=7;continue}if(void 0===this._board[i]||this._board[i].color!==e)continue;let s=this._board[i],o=i-t;if(0===o)continue;let a=o+119;if(b[a]&w[s.type]){if("p"===s.type){if(o>0&&"w"===s.color||o<=0&&"b"===s.color)if(!r)return!0;else n.push(j(i));continue}if("n"===s.type||"k"===s.type)if(!r)return!0;else{n.push(j(i));continue}let e=y[a],l=i+e,u=!1;for(;l!==t;){if(null!=this._board[l]){u=!0;break}l+=e}if(!u)if(!r)return!0;else{n.push(j(i));continue}}}return!!r&&n}attackers(e,t){return t?this._attacked(t,p[e],!0):this._attacked(this._turn,p[e],!0)}_isKingAttacked(e){let t=this._kings[e];return -1!==t&&this._attacked(k(e),t)}isAttacked(e,t){return this._attacked(t,p[e])}isCheck(){return this._isKingAttacked(this._turn)}inCheck(){return this.isCheck()}isCheckmate(){return this.isCheck()&&0===this._moves().length}isStalemate(){return!this.isCheck()&&0===this._moves().length}isInsufficientMaterial(){let e={b:0,n:0,r:0,q:0,k:0,p:0},t=[],r=0,n=0;for(let i=p.a8;i<=p.h1;i++){if(n=(n+1)%2,136&i){i+=7;continue}let s=this._board[i];s&&(e[s.type]=s.type in e?e[s.type]+1:1,"b"===s.type&&t.push(n),r++)}if(2===r||3===r&&(1===e.b||1===e.n))return!0;if(r===e.b+2){let e=0,r=t.length;for(let n=0;n<r;n++)e+=t[n];if(0===e||e===r)return!0}return!1}isThreefoldRepetition(){return this._getPositionCount(this.fen())>=3}isDrawByFiftyMoves(){return this._halfMoves>=100}isDraw(){return this.isDrawByFiftyMoves()||this.isStalemate()||this.isInsufficientMaterial()||this.isThreefoldRepetition()}isGameOver(){return this.isCheckmate()||this.isStalemate()||this.isDraw()}moves({verbose:e=!1,square:t,piece:r}={}){let n=this._moves({square:t,piece:r});return e?n.map(e=>new c(this,e)):n.map(e=>this._moveToSan(e,n))}_moves({legal:e=!0,piece:t,square:r}={}){let n=r?r.toLowerCase():void 0,i=t?.toLowerCase(),s=[],o=this._turn,a=k(o),l=p.a8,u=p.h1,c=!1;if(n)if(!(n in p))return[];else l=u=p[n],c=!0;for(let e=l;e<=u;e++){let t;if(136&e){e+=7;continue}if(!this._board[e]||this._board[e].color===a)continue;let{type:r}=this._board[e];if("p"===r){if(i&&i!==r)continue;t=e+v[o][0],!this._board[t]&&(D(s,o,e,t,"p"),t=e+v[o][1],O[o]!==e>>4||this._board[t]||D(s,o,e,t,"p",void 0,h.BIG_PAWN));for(let r=2;r<4;r++)136&(t=e+v[o][r])||(this._board[t]?.color===a?D(s,o,e,t,"p",this._board[t].type,h.CAPTURE):t===this._epSquare&&D(s,o,e,t,"p","p",h.EP_CAPTURE))}else{if(i&&i!==r)continue;for(let n=0,i=m[r].length;n<i;n++){let i=m[r][n];for(t=e;!(136&(t+=i));){if(this._board[t]){if(this._board[t].color===o)break;D(s,o,e,t,r,this._board[t].type,h.CAPTURE);break}if(D(s,o,e,t,r),"n"===r||"k"===r)break}}}}if((void 0===i||"k"===i)&&(!c||u===this._kings[o])){if(this._castling[o]&h.KSIDE_CASTLE){let e=this._kings[o],t=e+2;this._board[e+1]||this._board[t]||this._attacked(a,this._kings[o])||this._attacked(a,e+1)||this._attacked(a,t)||D(s,o,this._kings[o],t,"k",void 0,h.KSIDE_CASTLE)}if(this._castling[o]&h.QSIDE_CASTLE){let e=this._kings[o],t=e-2;this._board[e-1]||this._board[e-2]||this._board[e-3]||this._attacked(a,this._kings[o])||this._attacked(a,e-1)||this._attacked(a,t)||D(s,o,this._kings[o],t,"k",void 0,h.QSIDE_CASTLE)}}if(!e||-1===this._kings[o])return s;let d=[];for(let e=0,t=s.length;e<t;e++)this._makeMove(s[e]),this._isKingAttacked(o)||d.push(s[e]),this._undoMove();return d}move(e,{strict:t=!1}={}){let r=null;if("string"==typeof e)r=this._moveFromSan(e,t);else if("object"==typeof e){let t=this._moves();for(let n=0,i=t.length;n<i;n++)if(e.from===j(t[n].from)&&e.to===j(t[n].to)&&(!("promotion"in t[n])||e.promotion===t[n].promotion)){r=t[n];break}}if(!r)if("string"==typeof e)throw Error(`Invalid move: ${e}`);else throw Error(`Invalid move: ${JSON.stringify(e)}`);let n=new c(this,r);return this._makeMove(r),this._incPositionCount(n.after),n}_push(e){this._history.push({move:e,kings:{b:this._kings.b,w:this._kings.w},turn:this._turn,castling:{b:this._castling.b,w:this._castling.w},epSquare:this._epSquare,halfMoves:this._halfMoves,moveNumber:this._moveNumber})}_makeMove(e){let t=this._turn,r=k(t);if(this._push(e),this._board[e.to]=this._board[e.from],delete this._board[e.from],e.flags&h.EP_CAPTURE&&("b"===this._turn?delete this._board[e.to-16]:delete this._board[e.to+16]),e.promotion&&(this._board[e.to]={type:e.promotion,color:t}),"k"===this._board[e.to].type){if(this._kings[t]=e.to,e.flags&h.KSIDE_CASTLE){let t=e.to-1,r=e.to+1;this._board[t]=this._board[r],delete this._board[r]}else if(e.flags&h.QSIDE_CASTLE){let t=e.to+1,r=e.to-2;this._board[t]=this._board[r],delete this._board[r]}this._castling[t]=0}if(this._castling[t]){for(let r=0,n=S[t].length;r<n;r++)if(e.from===S[t][r].square&&this._castling[t]&S[t][r].flag){this._castling[t]^=S[t][r].flag;break}}if(this._castling[r]){for(let t=0,n=S[r].length;t<n;t++)if(e.to===S[r][t].square&&this._castling[r]&S[r][t].flag){this._castling[r]^=S[r][t].flag;break}}e.flags&h.BIG_PAWN?"b"===t?this._epSquare=e.to-16:this._epSquare=e.to+16:this._epSquare=-1,"p"===e.piece||e.flags&(h.CAPTURE|h.EP_CAPTURE)?this._halfMoves=0:this._halfMoves++,"b"===t&&this._moveNumber++,this._turn=r}undo(){let e=this._undoMove();if(e){let t=new c(this,e);return this._decPositionCount(t.after),t}return null}_undoMove(){let e=this._history.pop();if(void 0===e)return null;let t=e.move;this._kings=e.kings,this._turn=e.turn,this._castling=e.castling,this._epSquare=e.epSquare,this._halfMoves=e.halfMoves,this._moveNumber=e.moveNumber;let r=this._turn,n=k(r);if(this._board[t.from]=this._board[t.to],this._board[t.from].type=t.piece,delete this._board[t.to],t.captured)if(t.flags&h.EP_CAPTURE){let e;e="b"===r?t.to-16:t.to+16,this._board[e]={type:"p",color:n}}else this._board[t.to]={type:t.captured,color:n};if(t.flags&(h.KSIDE_CASTLE|h.QSIDE_CASTLE)){let e,r;t.flags&h.KSIDE_CASTLE?(e=t.to+1,r=t.to-1):(e=t.to-2,r=t.to+1),this._board[e]=this._board[r],delete this._board[r]}return t}pgn({newline:e="\n",maxWidth:t=0}={}){let r=[],n=!1;for(let t in this._header)this._header[t]&&r.push(`[${t} "${this._header[t]}"]`+e),n=!0;n&&this._history.length&&r.push(e);let i=e=>{let t=this._comments[this.fen()];if(void 0!==t){let r=e.length>0?" ":"";e=`${e}${r}{${t}}`}return e},s=[];for(;this._history.length>0;)s.push(this._undoMove());let o=[],a="";for(0===s.length&&o.push(i(""));s.length>0;){a=i(a);let e=s.pop();if(!e)break;if(this._history.length||"b"!==e.color)"w"===e.color&&(a.length&&o.push(a),a=this._moveNumber+".");else{let e=`${this._moveNumber}. ...`;a=a?`${a} ${e}`:e}a=a+" "+this._moveToSan(e,this._moves({legal:!0})),this._makeMove(e)}if(a.length&&o.push(i(a)),o.push(this._header.Result||"*"),0===t)return r.join("")+o.join(" ");let l=function(){return r.length>0&&" "===r[r.length-1]&&(r.pop(),!0)},u=0;for(let n=0;n<o.length;n++){if(u+o[n].length>t&&o[n].includes("{")){u=function(n,i){for(let s of i.split(" "))if(s){if(n+s.length>t){for(;l();)n--;r.push(e),n=0}r.push(s),n+=s.length,r.push(" "),n++}return l()&&n--,n}(u,o[n]);continue}u+o[n].length>t&&0!==n?(" "===r[r.length-1]&&r.pop(),r.push(e),u=0):0!==n&&(r.push(" "),u++),r.push(o[n]),u+=o[n].length}return r.join("")}header(...e){for(let t=0;t<e.length;t+=2)"string"==typeof e[t]&&"string"==typeof e[t+1]&&(this._header[e[t]]=e[t+1]);return this._header}setHeader(e,t){return this._header[e]=t??g[e]??null,this.getHeaders()}removeHeader(e){return e in this._header&&(this._header[e]=g[e]||null,!0)}getHeaders(){let e={};for(let[t,r]of Object.entries(this._header))null!==r&&(e[t]=r);return e}loadPgn(e,{strict:t=!1,newlineChar:r="\r?\n"}={}){function n(e){return e.replace(/\\/g,"\\")}e=e.trim();let i=RegExp("^(\\[((?:"+n(r)+")|.)*\\])((?:\\s*"+n(r)+"){2}|(?:\\s*"+n(r)+")*$)").exec(e),s=i&&i.length>=2?i[1]:"";this.reset();let o=function(e){let t={},i=e.split(new RegExp(n(r))),s="",o="";for(let e=0;e<i.length;e++){let r=/^\s*\[\s*([A-Za-z]+)\s*"(.*)"\s*\]\s*$/;s=i[e].replace(r,"$1"),o=i[e].replace(r,"$2"),s.trim().length>0&&(t[s]=o)}return t}(s),a="";for(let e in o)"fen"===e.toLowerCase()&&(a=o[e]),this.header(e,o[e]);if(t){if("1"===o.SetUp){if(!("FEN"in o))throw Error("Invalid PGN: FEN tag must be supplied with SetUp tag");this.load(o.FEN,{preserveHeaders:!0})}}else a&&this.load(a,{preserveHeaders:!0});let l=function(e){return e=e.replace(RegExp(n(r),"g")," "),`{${Array.from(e.slice(1,e.length-1)).map(function(e){return 128>e.charCodeAt(0)?e.charCodeAt(0).toString(16):encodeURIComponent(e).replace(/%/g,"").toLowerCase()}).join("")}}`},u=e.replace(s,"").replace(RegExp(`({[^}]*})+?|;([^${n(r)}]*)`,"g"),function(e,t,r){return void 0!==t?l(t):" "+l(`{${r.slice(1)}}`)}).replace(RegExp(n(r),"g")," "),c=/(\([^()]+\))+?/g;for(;c.test(u);)u=u.replace(c,"");let d=(u=(u=(u=u.replace(/\d+\.(\.\.)?/g,"")).replace(/\.\.\./g,"")).replace(/\$\d+/g,"")).trim().split(new RegExp(/\s+/));d=d.filter(e=>""!==e);let h="";for(let e=0;e<d.length;e++){let r=function(e){if(e.startsWith("{")&&e.endsWith("}")){var t;return 0==(t=e.slice(1,e.length-1)).length?"":decodeURIComponent("%"+(t.match(/.{1,2}/g)||[]).join("%"))}}(d[e]);if(void 0!==r){this._comments[this.fen()]=r;continue}let n=this._moveFromSan(d[e],t);if(null==n)if(_.indexOf(d[e])>-1)h=d[e];else throw Error(`Invalid move in PGN: ${d[e]}`);else h="",this._makeMove(n),this._incPositionCount(this.fen())}h&&Object.keys(this._header).length&&this._header.Result!==h&&this.setHeader("Result",h)}_moveToSan(e,t){let r="";if(e.flags&h.KSIDE_CASTLE)r="O-O";else if(e.flags&h.QSIDE_CASTLE)r="O-O-O";else{if("p"!==e.piece){let n=function(e,t){let r=e.from,n=e.to,i=e.piece,s=0,o=0,a=0;for(let e=0,l=t.length;e<l;e++){let l=t[e].from,u=t[e].to;i===t[e].piece&&r!==l&&n===u&&(s++,r>>4==l>>4&&o++,(15&r)==(15&l)&&a++)}if(s>0)if(o>0&&a>0)return j(r);else if(a>0)return j(r).charAt(1);else return j(r).charAt(0);return""}(e,t);r+=e.piece.toUpperCase()+n}e.flags&(h.CAPTURE|h.EP_CAPTURE)&&("p"===e.piece&&(r+=j(e.from)[0]),r+="x"),r+=j(e.to),e.promotion&&(r+="="+e.promotion.toUpperCase())}return this._makeMove(e),this.isCheck()&&(this.isCheckmate()?r+="#":r+="+"),this._undoMove(),r}_moveFromSan(e,t=!1){let r,n,i,s,o,a=I(e),l=T(a),u=this._moves({legal:!0,piece:l});for(let e=0,t=u.length;e<t;e++)if(a===I(this._moveToSan(u[e],u)))return u[e];if(t)return null;let c=!1;if((n=a.match(/([pnbrqkPNBRQK])?([a-h][1-8])x?-?([a-h][1-8])([qrbnQRBN])?/))?(r=n[1],i=n[2],s=n[3],o=n[4],1==i.length&&(c=!0)):(n=a.match(/([pnbrqkPNBRQK])?([a-h]?[1-8]?)x?-?([a-h][1-8])([qrbnQRBN])?/))&&(r=n[1],i=n[2],s=n[3],o=n[4],1==i.length&&(c=!0)),l=T(a),u=this._moves({legal:!0,piece:r||l}),!s)return null;for(let e=0,t=u.length;e<t;e++)if(i){if((!r||r.toLowerCase()==u[e].piece)&&p[i]==u[e].from&&p[s]==u[e].to&&(!o||o.toLowerCase()==u[e].promotion))return u[e];else if(c){let t=j(u[e].from);if((!r||r.toLowerCase()==u[e].piece)&&p[s]==u[e].to&&(i==t[0]||i==t[1])&&(!o||o.toLowerCase()==u[e].promotion))return u[e]}}else if(a===I(this._moveToSan(u[e],u)).replace("x",""))return u[e];return null}ascii(){let e="   +------------------------+\n";for(let t=p.a8;t<=p.h1;t++){if(0==(15&t)&&(e+=" "+"87654321"[t>>4]+" |"),this._board[t]){let r=this._board[t].type;e+=" "+("w"===this._board[t].color?r.toUpperCase():r.toLowerCase())+" "}else e+=" . ";t+1&136&&(e+="|\n",t+=8)}return e+"   +------------------------+\n     a  b  c  d  e  f  g  h"}perft(e){let t=this._moves({legal:!1}),r=0,n=this._turn;for(let i=0,s=t.length;i<s;i++)this._makeMove(t[i]),!this._isKingAttacked(n)&&(e-1>0?r+=this.perft(e-1):r++),this._undoMove();return r}turn(){return this._turn}board(){let e=[],t=[];for(let r=p.a8;r<=p.h1;r++)null==this._board[r]?t.push(null):t.push({square:j(r),type:this._board[r].type,color:this._board[r].color}),r+1&136&&(e.push(t),t=[],r+=8);return e}squareColor(e){if(e in p){let t=p[e];return((t>>4)+(15&t))%2==0?"light":"dark"}return null}history({verbose:e=!1}={}){let t=[],r=[];for(;this._history.length>0;)t.push(this._undoMove());for(;;){let n=t.pop();if(!n)break;e?r.push(new c(this,n)):r.push(this._moveToSan(n,this._moves())),this._makeMove(n)}return r}_getPositionCount(e){let t=L(e);return this._positionCount[t]||0}_incPositionCount(e){let t=L(e);void 0===this._positionCount[t]&&(this._positionCount[t]=0),this._positionCount[t]+=1}_decPositionCount(e){let t=L(e);1===this._positionCount[t]?delete this._positionCount[t]:this._positionCount[t]-=1}_pruneComments(){let e=[],t={},r=e=>{e in this._comments&&(t[e]=this._comments[e])};for(;this._history.length>0;)e.push(this._undoMove());for(r(this.fen());;){let t=e.pop();if(!t)break;this._makeMove(t),r(this.fen())}this._comments=t}getComment(){return this._comments[this.fen()]}setComment(e){this._comments[this.fen()]=e.replace("{","[").replace("}","]")}deleteComment(){return this.removeComment()}removeComment(){let e=this._comments[this.fen()];return delete this._comments[this.fen()],e}getComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>({fen:e,comment:this._comments[e]}))}deleteComments(){return this.removeComments()}removeComments(){return this._pruneComments(),Object.keys(this._comments).map(e=>{let t=this._comments[e];return delete this._comments[e],{fen:e,comment:t}})}setCastlingRights(e,t){for(let r of["k","q"])void 0!==t[r]&&(t[r]?this._castling[e]|=x[r]:this._castling[e]&=~x[r]);this._updateCastlingRights();let r=this.getCastlingRights(e);return(void 0===t.k||t.k===r.k)&&(void 0===t.q||t.q===r.q)}getCastlingRights(e){return{k:(this._castling[e]&x.k)!=0,q:(this._castling[e]&x.q)!=0}}moveNumber(){return this._moveNumber}}let M="abcdefgh".split(""),N={a8:"bR",b8:"bN",c8:"bB",d8:"bQ",e8:"bK",f8:"bB",g8:"bN",h8:"bR",a7:"bP",b7:"bP",c7:"bP",d7:"bP",e7:"bP",f7:"bP",g7:"bP",h7:"bP",a2:"wP",b2:"wP",c2:"wP",d2:"wP",e2:"wP",f2:"wP",g2:"wP",h2:"wP",a1:"wR",b1:"wN",c1:"wB",d1:"wQ",e1:"wK",f1:"wB",g1:"wN",h1:"wR"},R={a:0,b:1,c:2,d:3,e:4,f:5,g:6,h:7},A={a:7,b:6,c:5,d:4,e:3,f:2,g:1,h:0},q=[7,6,5,4,3,2,1,0],B=[0,1,2,3,4,5,6,7],U={wP:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsx)("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),wR:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{opacity:"1",fill:"#ffffff",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[(0,o.jsx)("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),(0,o.jsx)("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),(0,o.jsx)("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14",style:{strokeLinecap:"butt"}}),(0,o.jsx)("path",{d:"M 34,14 L 31,17 L 14,17 L 11,14"}),(0,o.jsx)("path",{d:"M 31,17 L 31,29.5 L 14,29.5 L 14,17",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 31,29.5 L 32.5,32 L 12.5,32 L 14,29.5"}),(0,o.jsx)("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wN:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[(0,o.jsx)("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#ffffff",stroke:"#000000"}}),(0,o.jsx)("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#ffffff",stroke:"#000000"}}),(0,o.jsx)("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#000000",stroke:"#000000"}}),(0,o.jsx)("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#000000",stroke:"#000000"}})]}))})),wB:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[(0,o.jsxs)("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt"}},{children:[(0,o.jsx)("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),(0,o.jsx)("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),(0,o.jsx)("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),(0,o.jsx)("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}})]}))})),wQ:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{fill:"#ffffff",stroke:"#000000",strokeWidth:"1.5",strokeLinejoin:"round"}},{children:[(0,o.jsx)("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z"}),(0,o.jsx)("path",{d:"M 9,26 C 9,28 10.5,28 11.5,30 C 12.5,31.5 12.5,31 12,33.5 C 10.5,34.5 11,36 11,36 C 9.5,37.5 11,38.5 11,38.5 C 17.5,39.5 27.5,39.5 34,38.5 C 34,38.5 35.5,37.5 34,36 C 34,36 34.5,34.5 33,33.5 C 32.5,31 32.5,31.5 33.5,30 C 34.5,28 36,28 36,26 C 27.5,24.5 17.5,24.5 9,26 z"}),(0,o.jsx)("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30",style:{fill:"none"}}),(0,o.jsx)("path",{d:"M 12,33.5 C 18,32.5 27,32.5 33,33.5",style:{fill:"none"}}),(0,o.jsx)("circle",{cx:"6",cy:"12",r:"2"}),(0,o.jsx)("circle",{cx:"14",cy:"9",r:"2"}),(0,o.jsx)("circle",{cx:"22.5",cy:"8",r:"2"}),(0,o.jsx)("circle",{cx:"31",cy:"9",r:"2"}),(0,o.jsx)("circle",{cx:"39",cy:"12",r:"2"})]}))})),wK:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[(0,o.jsx)("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#ffffff",stroke:"#000000",strokeLinecap:"butt",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#ffffff",stroke:"#000000"}}),(0,o.jsx)("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30",style:{fill:"none",stroke:"#000000"}}),(0,o.jsx)("path",{d:"M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5",style:{fill:"none",stroke:"#000000"}}),(0,o.jsx)("path",{d:"M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#000000"}})]}))})),bP:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsx)("path",{d:"m 22.5,9 c -2.21,0 -4,1.79 -4,4 0,0.89 0.29,1.71 0.78,2.38 C 17.33,16.5 16,18.59 16,21 c 0,2.03 0.94,3.84 2.41,5.03 C 15.41,27.09 11,31.58 11,39.5 H 34 C 34,31.58 29.59,27.09 26.59,26.03 28.06,24.84 29,23.03 29,21 29,18.59 27.67,16.5 25.72,15.38 26.21,14.71 26.5,13.89 26.5,13 c 0,-2.21 -1.79,-4 -4,-4 z",style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"nonzero",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"miter",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}})})),bR:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{opacity:"1",fill:"#000000",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[(0,o.jsx)("path",{d:"M 9,39 L 36,39 L 36,36 L 9,36 L 9,39 z ",style:{strokeLinecap:"butt"}}),(0,o.jsx)("path",{d:"M 12.5,32 L 14,29.5 L 31,29.5 L 32.5,32 L 12.5,32 z ",style:{strokeLinecap:"butt"}}),(0,o.jsx)("path",{d:"M 12,36 L 12,32 L 33,32 L 33,36 L 12,36 z ",style:{strokeLinecap:"butt"}}),(0,o.jsx)("path",{d:"M 14,29.5 L 14,16.5 L 31,16.5 L 31,29.5 L 14,29.5 z ",style:{strokeLinecap:"butt",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 14,16.5 L 11,14 L 34,14 L 31,16.5 L 14,16.5 z ",style:{strokeLinecap:"butt"}}),(0,o.jsx)("path",{d:"M 11,14 L 11,9 L 15,9 L 15,11 L 20,11 L 20,9 L 25,9 L 25,11 L 30,11 L 30,9 L 34,9 L 34,14 L 11,14 z ",style:{strokeLinecap:"butt"}}),(0,o.jsx)("path",{d:"M 12,35.5 L 33,35.5 L 33,35.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 13,31.5 L 32,31.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 14,29.5 L 31,29.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 14,16.5 L 31,16.5",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 11,14 L 34,14",style:{fill:"none",stroke:"#ffffff",strokeWidth:"1",strokeLinejoin:"miter"}})]}))})),bN:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{opacity:"1",fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[(0,o.jsx)("path",{d:"M 22,10 C 32.5,11 38.5,18 38,39 L 15,39 C 15,30 25,32.5 23,18",style:{fill:"#000000",stroke:"#000000"}}),(0,o.jsx)("path",{d:"M 24,18 C 24.38,20.91 18.45,25.37 16,27 C 13,29 13.18,31.34 11,31 C 9.958,30.06 12.41,27.96 11,28 C 10,28 11.19,29.23 10,30 C 9,30 5.997,31 6,26 C 6,24 12,14 12,14 C 12,14 13.89,12.1 14,10.5 C 13.27,9.506 13.5,8.5 13.5,7.5 C 14.5,6.5 16.5,10 16.5,10 L 18.5,10 C 18.5,10 19.28,8.008 21,7 C 22,7 22,10 22,10",style:{fill:"#000000",stroke:"#000000"}}),(0,o.jsx)("path",{d:"M 9.5 25.5 A 0.5 0.5 0 1 1 8.5,25.5 A 0.5 0.5 0 1 1 9.5 25.5 z",style:{fill:"#ffffff",stroke:"#ffffff"}}),(0,o.jsx)("path",{d:"M 15 15.5 A 0.5 1.5 0 1 1  14,15.5 A 0.5 1.5 0 1 1  15 15.5 z",transform:"matrix(0.866,0.5,-0.5,0.866,9.693,-5.173)",style:{fill:"#ffffff",stroke:"#ffffff"}}),(0,o.jsx)("path",{d:"M 24.55,10.4 L 24.1,11.85 L 24.6,12 C 27.75,13 30.25,14.49 32.5,18.75 C 34.75,23.01 35.75,29.06 35.25,39 L 35.2,39.5 L 37.45,39.5 L 37.5,39 C 38,28.94 36.62,22.15 34.25,17.66 C 31.88,13.17 28.46,11.02 25.06,10.5 L 24.55,10.4 z ",style:{fill:"#ffffff",stroke:"none"}})]}))})),bB:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{opacity:"1",fill:"none",fillRule:"evenodd",fillOpacity:"1",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[(0,o.jsxs)("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeLinecap:"butt"}},{children:[(0,o.jsx)("path",{d:"M 9,36 C 12.39,35.03 19.11,36.43 22.5,34 C 25.89,36.43 32.61,35.03 36,36 C 36,36 37.65,36.54 39,38 C 38.32,38.97 37.35,38.99 36,38.5 C 32.61,37.53 25.89,38.96 22.5,37.5 C 19.11,38.96 12.39,37.53 9,38.5 C 7.65,38.99 6.68,38.97 6,38 C 7.35,36.54 9,36 9,36 z"}),(0,o.jsx)("path",{d:"M 15,32 C 17.5,34.5 27.5,34.5 30,32 C 30.5,30.5 30,30 30,30 C 30,27.5 27.5,26 27.5,26 C 33,24.5 33.5,14.5 22.5,10.5 C 11.5,14.5 12,24.5 17.5,26 C 17.5,26 15,27.5 15,30 C 15,30 14.5,30.5 15,32 z"}),(0,o.jsx)("path",{d:"M 25 8 A 2.5 2.5 0 1 1  20,8 A 2.5 2.5 0 1 1  25 8 z"})]})),(0,o.jsx)("path",{d:"M 17.5,26 L 27.5,26 M 15,30 L 30,30 M 22.5,15.5 L 22.5,20.5 M 20,18 L 25,18",style:{fill:"none",stroke:"#ffffff",strokeLinejoin:"miter"}})]}))})),bQ:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{fill:"#000000",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}},{children:[(0,o.jsx)("path",{d:"M 9,26 C 17.5,24.5 30,24.5 36,26 L 38.5,13.5 L 31,25 L 30.7,10.9 L 25.5,24.5 L 22.5,10 L 19.5,24.5 L 14.3,10.9 L 14,25 L 6.5,13.5 L 9,26 z",style:{strokeLinecap:"butt",fill:"#000000"}}),(0,o.jsx)("path",{d:"m 9,26 c 0,2 1.5,2 2.5,4 1,1.5 1,1 0.5,3.5 -1.5,1 -1,2.5 -1,2.5 -1.5,1.5 0,2.5 0,2.5 6.5,1 16.5,1 23,0 0,0 1.5,-1 0,-2.5 0,0 0.5,-1.5 -1,-2.5 -0.5,-2.5 -0.5,-2 0.5,-3.5 1,-2 2.5,-2 2.5,-4 -8.5,-1.5 -18.5,-1.5 -27,0 z"}),(0,o.jsx)("path",{d:"M 11.5,30 C 15,29 30,29 33.5,30"}),(0,o.jsx)("path",{d:"m 12,33.5 c 6,-1 15,-1 21,0"}),(0,o.jsx)("circle",{cx:"6",cy:"12",r:"2"}),(0,o.jsx)("circle",{cx:"14",cy:"9",r:"2"}),(0,o.jsx)("circle",{cx:"22.5",cy:"8",r:"2"}),(0,o.jsx)("circle",{cx:"31",cy:"9",r:"2"}),(0,o.jsx)("circle",{cx:"39",cy:"12",r:"2"}),(0,o.jsx)("path",{d:"M 11,38.5 A 35,35 1 0 0 34,38.5",style:{fill:"none",stroke:"#000000",strokeLinecap:"butt"}}),(0,o.jsxs)("g",Object.assign({style:{fill:"none",stroke:"#ffffff"}},{children:[(0,o.jsx)("path",{d:"M 11,29 A 35,35 1 0 1 34,29"}),(0,o.jsx)("path",{d:"M 12.5,31.5 L 32.5,31.5"}),(0,o.jsx)("path",{d:"M 11.5,34.5 A 35,35 1 0 0 33.5,34.5"}),(0,o.jsx)("path",{d:"M 10.5,37.5 A 35,35 1 0 0 34.5,37.5"})]}))]}))})),bK:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"45",height:"45"},{children:(0,o.jsxs)("g",Object.assign({style:{fill:"none",fillOpacity:"1",fillRule:"evenodd",stroke:"#000000",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"4",strokeDasharray:"none",strokeOpacity:"1"}},{children:[(0,o.jsx)("path",{d:"M 22.5,11.63 L 22.5,6",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"},id:"path6570"}),(0,o.jsx)("path",{d:"M 22.5,25 C 22.5,25 27,17.5 25.5,14.5 C 25.5,14.5 24.5,12 22.5,12 C 20.5,12 19.5,14.5 19.5,14.5 C 18,17.5 22.5,25 22.5,25",style:{fill:"#000000",fillOpacity:"1",strokeLinecap:"butt",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 12.5,37 C 18,40.5 27,40.5 32.5,37 L 32.5,30 C 32.5,30 41.5,25.5 38.5,19.5 C 34.5,13 25,16 22.5,23.5 L 22.5,27 L 22.5,23.5 C 20,16 10.5,13 6.5,19.5 C 3.5,25.5 12.5,30 12.5,30 L 12.5,37",style:{fill:"#000000",stroke:"#000000"}}),(0,o.jsx)("path",{d:"M 20,8 L 25,8",style:{fill:"none",stroke:"#000000",strokeLinejoin:"miter"}}),(0,o.jsx)("path",{d:"M 32,29.5 C 32,29.5 40.5,25.5 38.03,19.85 C 34.15,14 25,18 22.5,24.5 L 22.5,26.6 L 22.5,24.5 C 20,18 10.85,14 6.97,19.85 C 4.5,25.5 13,29.5 13,29.5",style:{fill:"none",stroke:"#ffffff"}}),(0,o.jsx)("path",{d:"M 12.5,30 C 18,27 27,27 32.5,30 M 12.5,33.5 C 18,30.5 27,30.5 32.5,33.5 M 12.5,37 C 18,34 27,34 32.5,37",style:{fill:"none",stroke:"#ffffff"}})]}))}))};function z(e,t,r){let n=t/8;return{x:("white"===e?R:A)[r[0]]*n+n/2,y:("white"===e?q:B)[parseInt(r[1],10)-1]*n+n/2}}function W(e){let t=!1;return Object.keys(N).forEach(r=>{e[r]!==N[r]&&(t=!0)}),Object.keys(e).forEach(r=>{N[r]!==e[r]&&(t=!0)}),t}function F(e){return"start"===e?N:"string"==typeof e?function(e){if(!function(e){let t=(e=(e=e.replace(/ .+$/,"")).replace(/8/g,"11111111").replace(/7/g,"1111111").replace(/6/g,"111111").replace(/5/g,"11111").replace(/4/g,"1111").replace(/3/g,"111").replace(/2/g,"11")).split("/");if(8!==t.length)return!1;for(let e=0;e<8;e++)if(8!==t[e].length||-1!==t[e].search(/[^kqrnbpKQRNBP1]/))return!1;return!0}(e))return{};let t=(e=e.replace(/ .+$/,"")).split("/"),r={},n=8;for(let e=0;e<8;e++){let s=t[e].split(""),o=0;for(let e=0;e<s.length;e++){var i;-1!==s[e].search(/[1-8]/)?o+=parseInt(s[e],10):(r[M[o]+n]=(i=s[e]).toLowerCase()===i?"b"+i.toUpperCase():"w"+i.toUpperCase(),o+=1)}n-=1}return r}(e):e}let H=(e,t=!0,r,n)=>{let[i,s]=(0,a.useState)([]),[o,l]=(0,a.useState)([]),[u,c]=(0,a.useState)();function d(){l([]),c(void 0)}(0,a.useEffect)(()=>{Array.isArray(e)&&(d(),s(null==e?void 0:e.filter(e=>e[0]!==e[1])))},[e]),(0,a.useEffect)(()=>{null==r||r(o)},[o]);let h=[...o,...i];return{arrows:h,newArrow:u,clearArrows:d,drawNewArrow:(e,r)=>{t&&c([e,r,n])},setArrows:l,onArrowDrawEnd:(e,r)=>{let i;e!==r&&t&&(i=h.every(([t,n])=>t!==e||n!==r)?[...o,[e,r,n]]:o.filter(([t,n])=>t!==e||n!==r),c(void 0),l(i))}}},$=(0,a.createContext)({}),K=()=>(0,a.useContext)($),Q=(0,a.forwardRef)(({allowDragOutsideBoard:e=!0,animationDuration:t=300,areArrowsAllowed:r=!0,arePiecesDraggable:n=!0,arePremovesAllowed:i=!1,autoPromoteToQueen:s=!1,boardOrientation:l="white",boardWidth:u,children:c,clearPremovesOnRightClick:d=!0,customArrows:h,customArrowColor:g="rgb(255,170,0)",customBoardStyle:f,customNotationStyle:p,customDarkSquareStyle:v={backgroundColor:"#B58863"},customDropSquareStyle:m={boxShadow:"inset 0 0 1px 6px rgba(255,255,255,0.75)"},customLightSquareStyle:b={backgroundColor:"#F0D9B5"},customPieces:y,customPremoveDarkSquareStyle:w={backgroundColor:"#A42323"},customPremoveLightSquareStyle:C={backgroundColor:"#BD2828"},customSquare:x="div",customSquareStyles:S,dropOffBoardAction:O="snapback",id:_=0,isDraggablePiece:E=()=>!0,getPositionObject:j=()=>{},onArrowsChange:k=()=>{},onDragOverSquare:D=()=>{},onMouseOutSquare:T=()=>{},onMouseOverSquare:I=()=>{},onPieceClick:L=()=>{},onPieceDragBegin:P=()=>{},onPieceDragEnd:M=()=>{},onPieceDrop:N=()=>!0,onPieceDropOffBoard:R=()=>{},onPromotionCheck:A=(e,t,r)=>("wP"===r&&"7"===e[1]&&"8"===t[1]||"bP"===r&&"2"===e[1]&&"1"===t[1])&&1>=Math.abs(e.charCodeAt(0)-t.charCodeAt(0)),onPromotionPieceSelect:q=()=>!0,onSparePieceDrop:B=()=>!0,onSquareClick:z=()=>{},onSquareRightClick:K=()=>{},position:Q="start",promotionDialogVariant:G="default",promotionToSquare:Y=null,showBoardNotation:X=!0,showPromotionDialog:V=!1,snapToCursor:J=!0},Z)=>{let[ee,et]=(0,a.useState)(F(Q)),[er,en]=(0,a.useState)({removed:{},added:{}}),[ei,es]=(0,a.useState)(void 0),[eo,ea]=(0,a.useState)(V&&!s),[el,eu]=(0,a.useState)(null),[ec,ed]=(0,a.useState)(Y),[eh,eg]=(0,a.useState)([]),ef=(0,a.useRef)(eh),[ep,ev]=(0,a.useState)(),[em,eb]=(0,a.useState)(Object.assign(Object.assign({},U),y)),[ey,ew]=(0,a.useState)(!1),eC=(0,a.useRef)(),[ex,eS]=(0,a.useState)(!1),[eO,e_]=(0,a.useState)(null);(0,a.useImperativeHandle)(Z,()=>({clearPremoves(e=!0){eL(e)}})),(0,a.useEffect)(()=>{eb(Object.assign(Object.assign({},U),y))},[y]),(0,a.useEffect)(()=>{ea(V),ed(Y)},[Y,V]),(0,a.useEffect)(()=>{var e,r,n;eP();let s=F(Q),o=function(e,t){let r={removed:{},added:{}};return Object.keys(e).forEach(n=>{t[n]!==e[n]&&(r.removed[n]=e[n])}),Object.keys(t).forEach(n=>{e[n]!==t[n]&&(r.added[n]=t[n])}),r}(ee,s),a=(null==(e=Object.keys(o.added))?void 0:e.length)<=2?null==(n=null==(r=Object.entries(o.added))?void 0:r[0])?void 0:n[1][0]:void 0;return ex?(et(s),eS(!1),i&&eI(a),eC.current&&clearTimeout(eC.current)):ey?(et(s),eS(!1),i&&eI(a)):(W(s)&&void 0!==ei?es(a):W(s)?es(void 0):es("b"),en(o),eS(!0),eC.current=setTimeout(()=>{et(s),eS(!1),i&&eI(a)},t)),ew(!1),j(s),ek(),()=>{clearTimeout(eC.current)}},[Q]);let{arrows:eE,newArrow:ej,clearArrows:ek,drawNewArrow:eD,onArrowDrawEnd:eT}=H(h,r,k,g);function eI(e){if(0===ef.current.length)return;let t=ef.current[0];if(void 0!==t.piece[0]&&t.piece[0]!==e&&N.length)if(es(t.piece[0]),ew(!0),N(t.sourceSq,t.targetSq,t.piece)){let e=[...ef.current];e.shift(),ef.current=e,eg([...e])}else eL()}function eL(e=!0){e&&es(void 0),ef.current=[],eg([])}function eP(){eu(null),ed(null),ea(!1)}return(0,o.jsx)($.Provider,Object.assign({value:{allowDragOutsideBoard:e,animationDuration:t,arePiecesDraggable:n,arePremovesAllowed:i,arrows:eE,autoPromoteToQueen:s,boardOrientation:l,boardWidth:u,chessPieces:em,clearArrows:ek,clearCurrentRightClickDown:function(){ev(void 0)},currentPosition:ee,currentRightClickDown:ep,customArrowColor:g,customBoardStyle:f,customDarkSquareStyle:v,customDropSquareStyle:m,customLightSquareStyle:b,customNotationStyle:p,customPremoveDarkSquareStyle:w,customPremoveLightSquareStyle:C,customSquare:x,customSquareStyles:S,deletePieceFromSquare:function(e){let t=Object.assign({},ee);delete t[e],et(t),j(t)},drawNewArrow:eD,dropOffBoardAction:O,handleSetPosition:function(e,t,r,n){if(e===t)return;if(ek(),i&&ex||i&&(ei===r[0]||ef.current.filter(e=>e.piece[0]===r[0]).length>0)){let n=[...ef.current];n.push({sourceSq:e,targetSq:t,piece:r}),ef.current=n,eg([...n]),eP();return}if(!i&&ex)return;let s=Object.assign({},ee);ew(!!n),es(r[0]),N.length?N(e,t,r)||(eL(),ew(!1)):(delete s[e],s[t]=r,et(s)),eP(),j(s)},handleSparePieceDrop:function(e,t){if(!B(e,t))return;let r=Object.assign({},ee);r[t]=e,et(r),j(r)},id:_,isDraggablePiece:E,isWaitingForAnimation:ex,lastPieceColour:ei,lastSquareDraggedOver:eO,newArrow:ej,onArrowDrawEnd:eT,onDragOverSquare:D,onMouseOutSquare:T,onMouseOverSquare:I,onPieceClick:L,onPieceDragBegin:P,onPieceDragEnd:M,onPieceDrop:N,onPieceDropOffBoard:R,onPromotionCheck:A,onPromotionPieceSelect:q,onRightClickDown:function(e){ev(e)},onRightClickUp:function(e){if(ep){if(ep===e){ev(void 0),d&&eL(!1),K(e);return}}else ev(void 0)},onSparePieceDrop:B,onSquareClick:z,positionDifferences:er,premoves:eh,promoteFromSquare:el,promoteToSquare:ec,promotionDialogVariant:G,setLastSquareDraggedOver:e_,setPromoteFromSquare:eu,setPromoteToSquare:ed,setShowPromoteDialog:ea,showBoardNotation:X,showPromoteDialog:eo,snapToCursor:J}},{children:c}))});function G({row:e,col:t}){let{boardOrientation:r,boardWidth:n,customDarkSquareStyle:i,customLightSquareStyle:s,customNotationStyle:a}=K(),l=s.backgroundColor,u=i.backgroundColor,c=0===t,d=7===e;function h(){return"white"===r?8-e:e+1}function g(){return"black"===r?M[7-t]:M[t]}return c&&d?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:l}),X(n,a))},{children:h()})),(0,o.jsx)("div",Object.assign({style:Object.assign(Object.assign({zIndex:3,position:"absolute"},{color:l}),Y(n,a))},{children:g()}))]}):d?(0,o.jsx)("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},{color:t%2!=0?u:l}),Y(n,a))},{children:g()})):c?(0,o.jsx)("div",Object.assign({style:Object.assign(Object.assign({userSelect:"none",zIndex:3,position:"absolute"},{color:e%2==0?u:l}),X(n,a))},{children:h()})):null}let Y=(e,t)=>Object.assign({alignSelf:"flex-end",paddingLeft:e/8-e/48,fontSize:e/48},t),X=(e,t)=>Object.assign({alignSelf:"flex-start",paddingRight:e/8-e/48,fontSize:e/48},t),V=(0,a.createContext)({dragDropManager:void 0});function J(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Z="function"==typeof Symbol&&Symbol.observable||"@@observable",ee=function(){return Math.random().toString(36).substring(7).split("").join(".")},et={INIT:"@@redux/INIT"+ee(),REPLACE:"@@redux/REPLACE"+ee(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+ee()}};function er(e,t,...r){if("undefined"!=typeof process&&void 0===t)throw Error("invariant requires an error message argument");if(!e){let e;if(void 0===t)e=Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let n=0;(e=Error(t.replace(/%s/g,function(){return r[n++]}))).name="Invariant Violation"}throw e.framesToPop=1,e}}function en(e){return"object"==typeof e}let ei="dnd-core/INIT_COORDS",es="dnd-core/BEGIN_DRAG",eo="dnd-core/PUBLISH_DRAG_SOURCE",ea="dnd-core/HOVER",el="dnd-core/DROP",eu="dnd-core/END_DRAG";function ec(e,t){return{type:ei,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}let ed={type:ei,payload:{clientOffset:null,sourceClientOffset:null}};function eh(e,t){return null===t?null===e:Array.isArray(e)?e.some(e=>e===t):e===t}class eg{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){var e,t,r,n,i;let s=this,{dispatch:o}=this.store,a={beginDrag:(e=this,function(t=[],r={publishSource:!0}){var n,i,s;let{publishSource:o=!0,clientOffset:a,getSourceClientOffset:l}=r,u=e.getMonitor(),c=e.getRegistry();e.dispatch(ec(a)),n=t,i=u,s=c,er(!i.isDragging(),"Cannot call beginDrag while dragging."),n.forEach(function(e){er(s.getSource(e),"Expected sourceIds to be registered.")});let d=function(e,t){let r=null;for(let n=e.length-1;n>=0;n--)if(t.canDragSource(e[n])){r=e[n];break}return r}(t,u);if(null==d)return void e.dispatch(ed);let h=null;if(a){if(!l)throw Error("getSourceClientOffset must be defined");er("function"==typeof l,"When clientOffset is provided, getSourceClientOffset must be a function."),h=l(d)}e.dispatch(ec(a,h));let g=c.getSource(d).beginDrag(u,d);if(null!=g)return er(en(g),"Item must be an object."),c.pinSource(d),{type:es,payload:{itemType:c.getSourceType(d),item:g,sourceId:d,clientOffset:a||null,sourceClientOffset:h||null,isSourcePublic:!!o}}}),publishDragSource:(t=this,function(){if(t.getMonitor().isDragging())return{type:eo}}),hover:(r=this,function(e,{clientOffset:t}={}){var n,i,s;er(Array.isArray(e),"Expected targetIds to be an array.");let o=e.slice(0),a=r.getMonitor(),l=r.getRegistry();return function(e,t,r){for(let n=e.length-1;n>=0;n--){let i=e[n];eh(t.getTargetType(i),r)||e.splice(n,1)}}(o,l,a.getItemType()),function(e,t,r){er(t.isDragging(),"Cannot call hover while not dragging."),er(!t.didDrop(),"Cannot call hover after drop.");for(let t=0;t<e.length;t++){let n=e[t];er(e.lastIndexOf(n)===t,"Expected targetIds to be unique in the passed array."),er(r.getTarget(n),"Expected targetIds to be registered.")}}(o,a,l),n=o,i=a,s=l,n.forEach(function(e){s.getTarget(e).hover(i,e)}),{type:ea,payload:{targetIds:o,clientOffset:t||null}}}),drop:(n=this,function(e={}){var t;let r=n.getMonitor(),i=n.getRegistry();er((t=r).isDragging(),"Cannot call drop while not dragging."),er(!t.didDrop(),"Cannot call drop twice during one drag operation."),(function(e){let t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t})(r).forEach((t,s)=>{let o={type:el,payload:{dropResult:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e,function(e,t,r,n){var i;let s=r.getTarget(e),o=s?s.drop(n,e):void 0;return er(void 0===(i=o)||en(i),"Drop result must either be an object or undefined."),void 0===o&&(o=0===t?{}:n.getDropResult()),o}(t,s,i,r))}};n.dispatch(o)})}),endDrag:(i=this,function(){let e=i.getMonitor(),t=i.getRegistry();er(e.isDragging(),"Cannot call endDrag while not dragging.");let r=e.getSourceId();return null!=r&&(t.getSource(r,!0).endDrag(e,r),t.unpinSource()),{type:eu}})};return Object.keys(a).reduce((e,t)=>{let r=a[t];return e[t]=(...e)=>{let t=r.apply(s,e);void 0!==t&&o(t)},e},{})}dispatch(e){this.store.dispatch(e)}constructor(e,t){this.isSetUp=!1,this.handleRefCountChange=()=>{let e=this.store.getState().refCount>0;this.backend&&(e&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!e&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=t,e.subscribe(this.handleRefCountChange)}}function ef(e,t){return{x:e.x-t.x,y:e.y-t.y}}let ep=[],ev=[];ep.__IS_NONE__=!0,ev.__IS_ALL__=!0;class em{subscribeToStateChange(e,t={}){let{handlerIds:r}=t;er("function"==typeof e,"listener must be a function."),er(void 0===r||Array.isArray(r),"handlerIds, when specified, must be an array of strings.");let n=this.store.getState().stateId;return this.store.subscribe(()=>{let t=this.store.getState(),i=t.stateId;try{i===n||i===n+1&&!function(e,t){return e!==ep&&(e===ev||void 0===t||t.filter(t=>e.indexOf(t)>-1).length>0)}(t.dirtyHandlerIds,r)||e()}finally{n=i}})}subscribeToOffsetChange(e){er("function"==typeof e,"listener must be a function.");let t=this.store.getState().dragOffset;return this.store.subscribe(()=>{let r=this.store.getState().dragOffset;r!==t&&(t=r,e())})}canDragSource(e){if(!e)return!1;let t=this.registry.getSource(e);return er(t,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()&&t.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;let t=this.registry.getTarget(e);return er(t,`Expected to find a valid target. targetId=${e}`),!(!this.isDragging()||this.didDrop())&&eh(this.registry.getTargetType(e),this.getItemType())&&t.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;let t=this.registry.getSource(e,!0);return er(t,`Expected to find a valid source. sourceId=${e}`),!!this.isDragging()&&!!this.isSourcePublic()&&this.registry.getSourceType(e)===this.getItemType()&&t.isDragging(this,e)}isOverTarget(e,t={shallow:!1}){if(!e)return!1;let{shallow:r}=t;if(!this.isDragging())return!1;let n=this.registry.getTargetType(e),i=this.getItemType();if(i&&!eh(n,i))return!1;let s=this.getTargetIds();if(!s.length)return!1;let o=s.indexOf(e);return r?o===s.length-1:o>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return function(e){let{clientOffset:t,initialClientOffset:r,initialSourceClientOffset:n}=e;return t&&r&&n?ef({x:t.x+n.x,y:t.y+n.y},r):null}(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){let{clientOffset:e,initialClientOffset:t}=this.store.getState().dragOffset;return e&&t?ef(e,t):null}constructor(e,t){this.store=e,this.registry=t}}let eb="undefined"!=typeof global?global:self,ey=eb.MutationObserver||eb.WebKitMutationObserver;function ew(e){return function(){let t=setTimeout(n,0),r=setInterval(n,50);function n(){clearTimeout(t),clearInterval(r),e()}}}let eC="function"==typeof ey?function(e){let t=1,r=new ey(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){n.data=t=-t}}:ew;class ex{enqueueTask(e){let{queue:t,requestFlush:r}=this;t.length||(r(),this.flushing=!0),t[t.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{let{queue:e}=this;for(;this.index<e.length;){let t=this.index;if(this.index++,e[t].call(),this.index>this.capacity){for(let t=0,r=e.length-this.index;t<r;t++)e[t]=e[t+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=eC(this.flush),this.requestErrorThrow=ew(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class eS{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,t){this.onError=e,this.release=t,this.task=null}}class eO{create(e){let t=this.freeTasks,r=t.length?t.pop():new eS(this.onError,e=>t[t.length]=e);return r.task=e,r}constructor(e){this.onError=e,this.freeTasks=[]}}let e_=new ex,eE=new eO(e_.registerPendingError),ej="dnd-core/ADD_SOURCE",ek="dnd-core/ADD_TARGET",eD="dnd-core/REMOVE_SOURCE",eT="dnd-core/REMOVE_TARGET";function eI(e,t){if(t&&Array.isArray(e))return void e.forEach(e=>eI(e,!1));er("string"==typeof e||"symbol"==typeof e,t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}!function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"}(i||(i={}));let eL=0;function eP(e){switch(e[0]){case"S":return i.SOURCE;case"T":return i.TARGET;default:throw Error(`Cannot parse handler ID: ${e}`)}}function eM(e,t){let r=e.entries(),n=!1;do{let{done:e,value:[,i]}=r.next();if(i===t)return!0;n=!!e}while(!n);return!1}class eN{addSource(e,t){eI(e),er("function"==typeof t.canDrag,"Expected canDrag to be a function."),er("function"==typeof t.beginDrag,"Expected beginDrag to be a function."),er("function"==typeof t.endDrag,"Expected endDrag to be a function.");let r=this.addHandler(i.SOURCE,e,t);return this.store.dispatch({type:ej,payload:{sourceId:r}}),r}addTarget(e,t){eI(e,!0),er("function"==typeof t.canDrop,"Expected canDrop to be a function."),er("function"==typeof t.hover,"Expected hover to be a function."),er("function"==typeof t.drop,"Expected beginDrag to be a function.");let r=this.addHandler(i.TARGET,e,t);return this.store.dispatch({type:ek,payload:{targetId:r}}),r}containsHandler(e){return eM(this.dragSources,e)||eM(this.dropTargets,e)}getSource(e,t=!1){return er(this.isSourceId(e),"Expected a valid source ID."),t&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return er(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return er(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return er(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return eP(e)===i.SOURCE}isTargetId(e){return eP(e)===i.TARGET}removeSource(e){er(this.getSource(e),"Expected an existing source."),this.store.dispatch({type:eD,payload:{sourceId:e}}),e_.enqueueTask(eE.create(()=>{this.dragSources.delete(e),this.types.delete(e)}))}removeTarget(e){er(this.getTarget(e),"Expected an existing target."),this.store.dispatch({type:eT,payload:{targetId:e}}),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){let t=this.getSource(e);er(t,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=t}unpinSource(){er(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,t,r){let n=function(e){let t=(eL++).toString();switch(e){case i.SOURCE:return`S${t}`;case i.TARGET:return`T${t}`;default:throw Error(`Unknown Handler Role: ${e}`)}}(e);return this.types.set(n,t),e===i.SOURCE?this.dragSources.set(n,r):e===i.TARGET&&this.dropTargets.set(n,r),n}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}let eR=(e,t)=>e===t,eA={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function eq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}let eB={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function eU(e={},t){var r;return{dirtyHandlerIds:function(e=ep,t){switch(t.type){case ea:break;case ej:case ek:case eT:case eD:return ep;default:return ev}let{targetIds:r=[],prevTargetIds:n=[]}=t.payload,i=function(e,t){let r=new Map,n=e=>{r.set(e,r.has(e)?r.get(e)+1:1)};e.forEach(n),t.forEach(n);let i=[];return r.forEach((e,t)=>{1===e&&i.push(t)}),i}(r,n);if(!(i.length>0||!function(e,t,r=eR){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!r(e[n],t[n]))return!1;return!0}(r,n)))return ep;let s=n[n.length-1],o=r[r.length-1];return s!==o&&(s&&i.push(s),o&&i.push(o)),i}(e.dirtyHandlerIds,{type:t.type,payload:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},t.payload,{prevTargetIds:(r=[],"dragOperation.targetIds".split(".").reduce((e,t)=>e&&e[t]?e[t]:r||null,e))})}),dragOffset:function(e=eA,t){let{payload:r}=t;switch(t.type){case ei:case es:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case ea:var n,i;if(n=e.clientOffset,i=r.clientOffset,!n&&!i||n&&i&&n.x===i.x&&n.y===i.y)return e;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},e,{clientOffset:r.clientOffset});case eu:case el:return eA;default:return e}}(e.dragOffset,t),refCount:function(e=0,t){switch(t.type){case ej:case ek:return e+1;case eD:case eT:return e-1;default:return e}}(e.refCount,t),dragOperation:function(e=eB,t){let{payload:r}=t;switch(t.type){case es:return eq({},e,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case eo:return eq({},e,{isSourcePublic:!0});case ea:return eq({},e,{targetIds:r.targetIds});case eT:var n,i;if(-1===e.targetIds.indexOf(r.targetId))return e;return eq({},e,{targetIds:(n=e.targetIds,i=r.targetId,n.filter(e=>e!==i))});case el:return eq({},e,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case eu:return eq({},e,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e}}(e.dragOperation,t),stateId:function(e=0){return e+1}(e.stateId)}}let ez=0,eW=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var eF=(0,a.memo)(function(e){var t,{children:r}=e;let[n,i]="manager"in(t=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r,n,i={},s=Object.keys(e);for(n=0;n<s.length;n++)r=s[n],t.indexOf(r)>=0||(i[r]=e[r]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,["children"]))?[{dragDropManager:t.manager},!1]:[function(e,t=eH(),r,n){return t[eW]||(t[eW]={dragDropManager:function(e,t,r={},n=!1){let i=function(e){let t="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__;return function e(t,r,n){if("function"==typeof r&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw Error(J(0));if("function"==typeof r&&void 0===n&&(n=r,r=void 0),void 0!==n){if("function"!=typeof n)throw Error(J(1));return n(e)(t,r)}if("function"!=typeof t)throw Error(J(2));var i,s=t,o=r,a=[],l=a,u=!1;function c(){l===a&&(l=a.slice())}function d(){if(u)throw Error(J(3));return o}function h(e){if("function"!=typeof e)throw Error(J(4));if(u)throw Error(J(5));var t=!0;return c(),l.push(e),function(){if(t){if(u)throw Error(J(6));t=!1,c();var r=l.indexOf(e);l.splice(r,1),a=null}}}function g(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw Error(J(7));if(void 0===e.type)throw Error(J(8));if(u)throw Error(J(9));try{u=!0,o=s(o,e)}finally{u=!1}for(var t=a=l,r=0;r<t.length;r++)(0,t[r])();return e}return g({type:et.INIT}),(i={dispatch:g,subscribe:h,getState:d,replaceReducer:function(e){if("function"!=typeof e)throw Error(J(10));s=e,g({type:et.REPLACE})}})[Z]=function(){var e;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw Error(J(11));function t(){e.next&&e.next(d())}return t(),{unsubscribe:h(t)}}})[Z]=function(){return this},e},i}(eU,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}(n),s=new em(i,new eN(i)),o=new eg(i,s),a=e(o,t,r);return o.receiveBackend(a),o}(e,t,r,n)}),t[eW]}(t.backend,t.context,t.options,t.debugMode),!t.context];return(0,a.useEffect)(()=>{if(i){let e=eH();return++ez,()=>{0==--ez&&(e[eW]=null)}}},[]),(0,o.jsx)(V.Provider,{value:n,children:r})});function eH(){return"undefined"!=typeof global?global:window}var e$=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(i=n;0!=i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(s=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=n;0!=i--;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=n;0!=i--;){var n,i,s,o=s[i];if(!e(t[o],r[o]))return!1}return!0}return t!=t&&r!=r};let eK="undefined"!=typeof window?a.useLayoutEffect:a.useEffect;function eQ(e,t,r){let[n,i]=(0,a.useState)(()=>t(e)),s=(0,a.useCallback)(()=>{let s=t(e);!e$(n,s)&&(i(s),r&&r())},[n,e,r]);return eK(s),[n,s]}function eG(e,t,r){return function(e,t,r){let[n,i]=eQ(e,t,r);return eK(function(){let t=e.getHandlerId();if(null!=t)return e.subscribeToStateChange(i,{handlerIds:[t]})},[e,i]),n}(t,e||(()=>({})),()=>r.reconnect())}function eY(e,t){let r=[...t||[]];return null==t&&"function"!=typeof e&&r.push(e),(0,a.useMemo)(()=>"function"==typeof e?e():e,r)}let eX=!1,eV=!1;class eJ{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){er(!eX,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return eX=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{eX=!1}}isDragging(){if(!this.sourceId)return!1;er(!eV,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return eV=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{eV=!1}}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,t){return this.internalMonitor.isOverTarget(e,t)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let eZ=!1;class e0{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,t){return this.internalMonitor.subscribeToStateChange(e,t)}canDrop(){if(!this.targetId)return!1;er(!eZ,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return eZ=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{eZ=!1}}isOver(e){return!!this.targetId&&this.internalMonitor.isOverTarget(this.targetId,e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function e1(e,t,r,n){let i=r?r.call(n,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;let s=Object.keys(e),o=Object.keys(t);if(s.length!==o.length)return!1;let a=Object.prototype.hasOwnProperty.bind(t);for(let o=0;o<s.length;o++){let l=s[o];if(!a(l))return!1;let u=e[l],c=t[l];if(!1===(i=r?r.call(n,u,c,l):void 0)||void 0===i&&u!==c)return!1}return!0}function e2(e){return null!==e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function e5(e){let t={};return Object.keys(e).forEach(r=>{let n=e[r];if(r.endsWith("Ref"))t[r]=e[r];else{let e=(e=null,t=null)=>(0,a.isValidElement)(e)?(!function(e){if("string"==typeof e.type)return;let t=e.type.displayName||e.type.name||"the component";throw Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${t} into a <div>, or turn it into a drag source or a drop target itself.`)}(e),function(e,t){let r=e.ref;return(er("string"!=typeof r,"Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r)?(0,a.cloneElement)(e,{ref:e=>{e3(r,e),e3(t,e)}}):(0,a.cloneElement)(e,{ref:t})}(e,t?e=>n(e,t):n)):(n(e,t),e);t[r]=()=>e}}),t}function e3(e,t){"function"==typeof e?e(t):e.current=t}class e4{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){let e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){let e=this.dragSource,t=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return t&&this.disconnectDragSource(),this.handlerId&&(e?t&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)):this.lastConnectedDragSource=e),t}reconnectDragPreview(e=!1){let t=this.dragPreview,r=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(r&&this.disconnectDragPreview(),this.handlerId){if(!t){this.lastConnectedDragPreview=t;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=t,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,t,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!e1(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!e1(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=e5({dragSource:(e,t)=>{this.clearDragSource(),this.dragSourceOptions=t||null,e2(e)?this.dragSourceRef=e:this.dragSourceNode=e,this.reconnectDragSource()},dragPreview:(e,t)=>{this.clearDragPreview(),this.dragPreviewOptions=t||null,e2(e)?this.dragPreviewRef=e:this.dragPreviewNode=e,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class e6{get connectTarget(){return this.dropTarget}reconnect(){let e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();let t=this.dropTarget;if(this.handlerId){if(!t){this.lastConnectedDropTarget=t;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=t,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,t,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!e1(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=e5({dropTarget:(e,t)=>{this.clearDropTarget(),this.dropTargetOptions=t,e2(e)?this.dropTargetRef=e:this.dropTargetNode=e,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function e8(){let{dragDropManager:e}=(0,a.useContext)(V);return er(null!=e,"Expected drag drop context"),e}class e7{beginDrag(){let e=this.spec,t=this.monitor,r=null;return null!=(r="object"==typeof e.item?e.item:"function"==typeof e.item?e.item(t):{})?r:null}canDrag(){let e=this.spec,t=this.monitor;return"boolean"==typeof e.canDrag?e.canDrag:"function"!=typeof e.canDrag||e.canDrag(t)}isDragging(e,t){let r=this.spec,n=this.monitor,{isDragging:i}=r;return i?i(n):t===e.getSourceId()}endDrag(){let e=this.spec,t=this.monitor,r=this.connector,{end:n}=e;n&&n(t.getItem(),t),r.reconnect()}constructor(e,t,r){this.spec=e,this.monitor=t,this.connector=r}}class e9{canDrop(){let e=this.spec,t=this.monitor;return!e.canDrop||e.canDrop(t.getItem(),t)}hover(){let e=this.spec,t=this.monitor;e.hover&&e.hover(t.getItem(),t)}drop(){let e=this.spec,t=this.monitor;if(e.drop)return e.drop(t.getItem(),t)}constructor(e,t){this.spec=e,this.monitor=t}}function te(e){let t=null;return()=>(null==t&&(t=e()),t)}class tt{enter(e){let t=this.entered.length;return this.entered=function(e,t){let r=new Set,n=e=>r.add(e);e.forEach(n),t.forEach(n);let i=[];return r.forEach(e=>i.push(e)),i}(this.entered.filter(t=>this.isNodeInDocument(t)&&(!t.contains||t.contains(e))),[e]),0===t&&this.entered.length>0}leave(e){var t;let r=this.entered.length;return this.entered=(t=this.entered.filter(this.isNodeInDocument),t.filter(t=>t!==e)),r>0&&0===this.entered.length}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class tr{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get:()=>(console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null)})})}loadDataTransfer(e){if(e){let t={};Object.keys(this.config.exposeProperties).forEach(r=>{let n=this.config.exposeProperties[r];null!=n&&(t[r]={value:n(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,t)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,t){return t===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}let tn="__NATIVE_FILE__",ti="__NATIVE_URL__",ts="__NATIVE_TEXT__",to="__NATIVE_HTML__";var ta=Object.freeze({__proto__:null,FILE:tn,HTML:to,TEXT:ts,URL:ti});function tl(e,t,r){let n=t.reduce((t,r)=>t||e.getData(r),"");return null!=n?n:r}let tu={[tn]:{exposeProperties:{files:e=>Array.prototype.slice.call(e.files),items:e=>e.items,dataTransfer:e=>e},matchesTypes:["Files"]},[to]:{exposeProperties:{html:(e,t)=>tl(e,t,""),dataTransfer:e=>e},matchesTypes:["Html","text/html"]},[ti]:{exposeProperties:{urls:(e,t)=>tl(e,t,"").split("\n"),dataTransfer:e=>e},matchesTypes:["Url","text/uri-list"]},[ts]:{exposeProperties:{text:(e,t)=>tl(e,t,""),dataTransfer:e=>e},matchesTypes:["Text","text/plain"]}};function tc(e){if(!e)return null;let t=Array.prototype.slice.call(e.types||[]);return Object.keys(tu).filter(e=>{let r=tu[e];return!!(null==r?void 0:r.matchesTypes)&&r.matchesTypes.some(e=>t.indexOf(e)>-1)})[0]||null}let td=te(()=>/firefox/i.test(navigator.userAgent)),th=te(()=>!!window.safari);class tg{interpolate(e){let t,{xs:r,ys:n,c1s:i,c2s:s,c3s:o}=this,a=r.length-1;if(e===r[a])return n[a];let l=0,u=o.length-1;for(;l<=u;){let i=r[t=Math.floor(.5*(l+u))];if(i<e)l=t+1;else{if(!(i>e))return n[t];u=t-1}}let c=e-r[a=Math.max(0,u)],d=c*c;return n[a]+i[a]*c+s[a]*d+o[a]*c*d}constructor(e,t){let r,n,i,{length:s}=e,o=[];for(let e=0;e<s;e++)o.push(e);o.sort((t,r)=>e[t]<e[r]?-1:1);let a=[],l=[];for(let i=0;i<s-1;i++)r=e[i+1]-e[i],n=t[i+1]-t[i],a.push(r),l.push(n/r);let u=[l[0]];for(let e=0;e<a.length-1;e++){let t=l[e],n=l[e+1];if(t*n<=0)u.push(0);else{r=a[e];let i=a[e+1],s=r+i;u.push(3*s/((s+i)/t+(s+r)/n))}}u.push(l[l.length-1]);let c=[],d=[];for(let e=0;e<u.length-1;e++){i=l[e];let t=u[e],r=1/a[e],n=t+u[e+1]-i-i;c.push((i-t-n)*r),d.push(n*r*r)}this.xs=e,this.ys=t,this.c1s=u,this.c2s=c,this.c3s=d}}function tf(e){let t=1===e.nodeType?e:e.parentElement;if(!t)return null;let{top:r,left:n}=t.getBoundingClientRect();return{x:n,y:r}}function tp(e){return{x:e.clientX,y:e.clientY}}let tv=class{get window(){return this.globalContext?this.globalContext:"undefined"!=typeof window?window:void 0}get document(){var e;return(null==(e=this.globalContext)?void 0:e.document)?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return(null==(e=this.optionsArgs)?void 0:e.rootElement)||this.window}constructor(e,t){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=t}};function tm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}class tb{profile(){var e,t;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:(null==(e=this.dragStartSourceIds)?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:(null==(t=this.dragOverTargetIds)?void 0:t.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){let e=this.rootElement;if(void 0!==e){if(e.__isReactDndBackendSetUp)throw Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){let e=this.rootElement;if(void 0!==e&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var t;null==(t=this.window)||t.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,t,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,t,r){this.sourceNodes.set(e,t),this.sourceNodeOptions.set(e,r);let n=t=>this.handleDragStart(t,e),i=e=>this.handleSelectStart(e);return t.setAttribute("draggable","true"),t.addEventListener("dragstart",n),t.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),t.removeEventListener("dragstart",n),t.removeEventListener("selectstart",i),t.setAttribute("draggable","false")}}connectDropTarget(e,t){let r=t=>this.handleDragEnter(t,e),n=t=>this.handleDragOver(t,e),i=t=>this.handleDrop(t,e);return t.addEventListener("dragenter",r),t.addEventListener("dragover",n),t.addEventListener("drop",i),()=>{t.removeEventListener("dragenter",r),t.removeEventListener("dragover",n),t.removeEventListener("drop",i)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){let e=this.monitor.getSourceId(),t=this.sourceNodeOptions.get(e);return tm({dropEffect:this.altKeyPressed?"copy":"move"},t||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){let e=this.monitor.getSourceId();return tm({anchorX:.5,anchorY:.5,captureDraggingState:!1},this.sourcePreviewNodeOptions.get(e)||{})}isDraggingNativeItem(){let e=this.monitor.getItemType();return Object.keys(ta).some(t=>ta[t]===e)}beginDragNativeItem(e,t){this.clearCurrentDragSourceNode(),this.currentNativeSource=function(e,t){let r=tu[e];if(!r)throw Error(`native type ${e} has no configuration`);let n=new tr(r);return n.loadDataTransfer(t),n}(e,t),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e,this.mouseMoveTimeoutTimer=setTimeout(()=>{var e;return null==(e=this.rootElement)?void 0:e.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},1e3)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;null==(e=this.window)||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,t){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(t))}handleDragEnter(e,t){this.dragEnterTargetIds.unshift(t)}handleDragOver(e,t){null===this.dragOverTargetIds&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(t)}handleDrop(e,t){this.dropTargetIds.unshift(t)}constructor(e,t,r){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=e=>{let t=this.sourceNodes.get(e);return t&&tf(t)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=e=>!!(e&&this.document&&this.document.body&&this.document.body.contains(e)),this.endDragIfSourceWasRemovedFromDOM=()=>{let e=this.currentDragSourceNode;null==e||this.isNodeInDocument(e)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=e=>{null===this.hoverRafId&&"undefined"!=typeof requestAnimationFrame&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(e||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{null!==this.hoverRafId&&"undefined"!=typeof cancelAnimationFrame&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=e=>{if(e.defaultPrevented)return;let{dragStartSourceIds:t}=this;this.dragStartSourceIds=null;let r=tp(e);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(t||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:r});let{dataTransfer:n}=e,i=tc(n);if(this.monitor.isDragging()){if(n&&"function"==typeof n.setDragImage){let e=this.monitor.getSourceId(),t=this.sourceNodes.get(e),i=this.sourcePreviewNodes.get(e)||t;if(i){let{anchorX:e,anchorY:s,offsetX:o,offsetY:a}=this.getCurrentSourcePreviewNodeOptions(),l=function(e,t,r,n,i){var s;let o,a,l,u="IMG"===t.nodeName&&(td()||!(null==(s=document.documentElement)?void 0:s.contains(t))),c=tf(u?e:t),d={x:r.x-c.x,y:r.y-c.y},{offsetWidth:h,offsetHeight:g}=e,{anchorX:f,anchorY:p}=n,{dragPreviewWidth:v,dragPreviewHeight:m}=(o=u?t.width:h,a=u?t.height:g,th()&&u&&(a/=window.devicePixelRatio,o/=window.devicePixelRatio),{dragPreviewWidth:o,dragPreviewHeight:a}),{offsetX:b,offsetY:y}=i;return{x:0===b||b?b:new tg([0,.5,1],[d.x,d.x/h*v,d.x+v-h]).interpolate(f),y:0===y||y?y:(l=new tg([0,.5,1],[d.y,d.y/g*m,d.y+m-g]).interpolate(p),th()&&u&&(l+=(window.devicePixelRatio-1)*m),l)}}(t,i,r,{anchorX:e,anchorY:s},{offsetX:o,offsetY:a});n.setDragImage(i,l.x,l.y)}}try{null==n||n.setData("application/json",{})}catch(e){}this.setCurrentDragSourceNode(e.target);let{captureDraggingState:t}=this.getCurrentSourcePreviewNodeOptions();t?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(i)this.beginDragNativeItem(i);else{if(n&&!n.types&&(e.target&&!e.target.hasAttribute||!e.target.hasAttribute("draggable")))return;e.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=e=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var t;null==(t=this.currentNativeSource)||t.loadDataTransfer(e.dataTransfer)}if(!this.enterLeaveCounter.enter(e.target)||this.monitor.isDragging())return;let{dataTransfer:r}=e,n=tc(r);n&&this.beginDragNativeItem(n,r)},this.handleTopDragEnter=e=>{let{dragEnterTargetIds:t}=this;this.dragEnterTargetIds=[],this.monitor.isDragging()&&(this.altKeyPressed=e.altKey,t.length>0&&this.actions.hover(t,{clientOffset:tp(e)}),t.some(e=>this.monitor.canDropOnTarget(e))&&(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect())))},this.handleTopDragOverCapture=e=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var t;null==(t=this.currentNativeSource)||t.loadDataTransfer(e.dataTransfer)}},this.handleTopDragOver=e=>{let{dragOverTargetIds:t}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none");return}this.altKeyPressed=e.altKey,this.lastClientOffset=tp(e),this.scheduleHover(t),(t||[]).some(e=>this.monitor.canDropOnTarget(e))?(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?e.preventDefault():(e.preventDefault(),e.dataTransfer&&(e.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=e=>{this.isDraggingNativeItem()&&e.preventDefault(),this.enterLeaveCounter.leave(e.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=e=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var t;e.preventDefault(),null==(t=this.currentNativeSource)||t.loadDataTransfer(e.dataTransfer)}else tc(e.dataTransfer)&&e.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=e=>{let{dropTargetIds:t}=this;this.dropTargetIds=[],this.actions.hover(t,{clientOffset:tp(e)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=e=>{let t=e.target;"function"==typeof t.dragDrop&&("INPUT"===t.tagName||"SELECT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable||(e.preventDefault(),t.dragDrop()))},this.options=new tv(t,r),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new tt(this.isNodeInDocument)}}let ty=function(e,t,r){return new tb(e,t,r)};function tw({isPremovedPiece:e=!1,piece:t,square:r,squares:i}){let{animationDuration:s,arePiecesDraggable:l,boardWidth:u,boardOrientation:c,chessPieces:d,currentPosition:h,deletePieceFromSquare:g,dropOffBoardAction:f,id:p,isDraggablePiece:v,isWaitingForAnimation:m,onPieceClick:b,onPieceDragBegin:y,onPieceDragEnd:w,onPieceDropOffBoard:C,onPromotionCheck:x,positionDifferences:S}=K(),[O,_]=(0,a.useState)({opacity:1,zIndex:5,touchAction:"none",cursor:l&&v({piece:t,sourceSquare:r})?"-webkit-grab":"default"}),[{canDrag:E,isDragging:j},k,D]=function(e,t){let r=eY(e,t);er(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");let n=function(){let e=e8();return(0,a.useMemo)(()=>new eJ(e),[e])}(),i=function(e,t){let r=e8(),n=(0,a.useMemo)(()=>new e4(r.getBackend()),[r]);return eK(()=>(n.dragSourceOptions=e||null,n.reconnect(),()=>n.disconnectDragSource()),[n,e]),eK(()=>(n.dragPreviewOptions=t||null,n.reconnect(),()=>n.disconnectDragPreview()),[n,t]),n}(r.options,r.previewOptions);let s=e8(),o=function(e,t,r){let n=(0,a.useMemo)(()=>new e7(e,t,r),[t,r]);return(0,a.useEffect)(()=>{n.spec=e},[e]),n}(r,n,i),l=(0,a.useMemo)(()=>{let e=r.type;return er(null!=e,"spec.type must be defined"),e},[r]);return eK(function(){if(null!=l){let[e,t]=function(e,t,r){let n=r.getRegistry(),i=n.addSource(e,t);return[i,()=>n.removeSource(i)]}(l,o,s);return n.receiveHandlerId(e),i.receiveHandlerId(e),t}},[s,n,i,o,l]),[eG(r.collect,n,i),(0,a.useMemo)(()=>i.hooks.dragSource(),[i]),(0,a.useMemo)(()=>i.hooks.dragPreview(),[i])]}(()=>({type:"piece",item:()=>(y(t,r),{piece:t,square:r,id:p}),end:(e,n)=>{w(t,r),n.didDrop()||("trash"===f&&g(r),null==C||C(r,t))},collect:e=>({canDrag:v({piece:t,sourceSquare:r}),isDragging:!!e.isDragging()})}),[t,r,h,p]);return D((n||((n=new Image).src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),n),{captureDraggingState:!0}),(0,a.useEffect)(()=>{_(e=>Object.assign(Object.assign({},e),{opacity:+!j}))},[j]),(0,a.useEffect)(()=>{var t;let n=null==(t=S.removed)?void 0:t[r];if(!S.added||!n)return;let i=Object.entries(S.added).find(([e,t])=>t===n||x(r,e,n));if(m&&n&&i&&!e){let e=i[0];if(r&&e){let t=u/8;_(n=>Object.assign(Object.assign({},n),{transform:`translate(${("black"===c?-1:1)*(e.charCodeAt(0)-r.charCodeAt(0))*t}px, ${("black"===c?-1:1)*(Number(r[1])-Number(e[1]))*t}px)`,transition:`transform ${s}ms`,zIndex:6}))}}},[S]),(0,a.useEffect)(()=>{let{sourceSq:e}={sourceSq:i[r]};e&&_(e=>Object.assign(Object.assign({},e),{transform:"translate(0px, 0px)",transition:"transform 0ms"}))},[h]),(0,a.useEffect)(()=>{_(e=>Object.assign(Object.assign({},e),{cursor:l&&v({piece:t,sourceSquare:r})?"-webkit-grab":"default"}))},[r,h,l]),(0,o.jsx)("div",Object.assign({ref:l&&E?k:null,onClick:()=>b(t,r),"data-piece":t,style:O},{children:"function"==typeof d[t]?d[t]({squareWidth:u/8,isDragging:j,square:r}):(0,o.jsx)("svg",Object.assign({viewBox:"1 1 43 43",width:u/8,height:u/8,style:{display:"block"}},{children:(0,o.jsx)("g",{children:d[t]})}))}))}function tC({square:e,squareColor:t,setSquares:r,squareHasPremove:n,children:i}){let s=(0,a.useRef)(null),{autoPromoteToQueen:l,boardWidth:u,boardOrientation:c,clearArrows:d,currentPosition:h,currentRightClickDown:g,customBoardStyle:f,customDarkSquareStyle:p,customDropSquareStyle:v,customLightSquareStyle:m,customPremoveDarkSquareStyle:b,customPremoveLightSquareStyle:y,customSquare:w,customSquareStyles:C,drawNewArrow:x,handleSetPosition:S,handleSparePieceDrop:O,isWaitingForAnimation:_,lastPieceColour:E,lastSquareDraggedOver:j,onArrowDrawEnd:k,onDragOverSquare:D,onMouseOutSquare:T,onMouseOverSquare:I,onPieceDrop:L,onPromotionCheck:P,onRightClickDown:M,onRightClickUp:N,onSquareClick:R,setLastSquareDraggedOver:A,setPromoteFromSquare:q,setPromoteToSquare:B,setShowPromoteDialog:U}=K(),[{isOver:z},W]=function(e,t){let r=eY(e,t),n=function(){let e=e8();return(0,a.useMemo)(()=>new e0(e),[e])}(),i=function(e){let t=e8(),r=(0,a.useMemo)(()=>new e6(t.getBackend()),[t]);return eK(()=>(r.dropTargetOptions=e||null,r.reconnect(),()=>r.disconnectDropTarget()),[e]),r}(r.options);let s=e8(),o=function(e,t){let r=(0,a.useMemo)(()=>new e9(e,t),[t]);return(0,a.useEffect)(()=>{r.spec=e},[e]),r}(r,n),l=function(e){let{accept:t}=e;return(0,a.useMemo)(()=>(er(null!=e.accept,"accept must be defined"),Array.isArray(t)?t:[t]),[t])}(r);return eK(function(){let[e,t]=function(e,t,r){let n=r.getRegistry(),i=n.addTarget(e,t);return[i,()=>n.removeTarget(i)]}(l,o,s);return n.receiveHandlerId(e),i.receiveHandlerId(e),t},[s,n,o,i,l.map(e=>e.toString()).join("|")]),[eG(r.collect,n,i),(0,a.useMemo)(()=>i.hooks.dropTarget(),[i])]}(()=>({accept:"piece",drop:F,collect:e=>({isOver:!!e.isOver()})}),[e,h,L,_,E]);function F(t){if(t.isSpare)return void O(t.piece,e);P(t.square,e,t.piece)?l?S(t.square,e,"w"===t.piece[0]?"wQ":"bQ"):(q(t.square),B(e),U(!0)):S(t.square,e,t.piece,!0)}(0,a.useEffect)(()=>{if(s.current){let{x:t,y:n}=s.current.getBoundingClientRect();r(r=>Object.assign(Object.assign({},r),{[e]:{x:t,y:n}}))}},[u,c]);let H=Object.assign(Object.assign(Object.assign(Object.assign({},tO(e,c,f)),"black"===t?p:m),n&&("black"===t?b:y)),z&&v);return(0,o.jsx)("div",Object.assign({ref:W,style:H,"data-square-color":t,"data-square":e,onTouchMove:e=>{var t;let r=e.touches[0],n=document.elementsFromPoint(r.clientX,r.clientY),i=null==(t=null==n?void 0:n.find(e=>e.getAttribute("data-square")))?void 0:t.getAttribute("data-square");i&&i!==j&&(A(i),D(i))},onMouseOver:t=>{2===t.buttons&&g&&x(g,e),t.relatedTarget&&t.currentTarget.contains(t.relatedTarget)||I(e)},onMouseOut:t=>{t.relatedTarget&&t.currentTarget.contains(t.relatedTarget)||T(e)},onMouseDown:t=>{2===t.button&&M(e)},onMouseUp:t=>{2===t.button&&(g&&k(g,e),N(e))},onDragEnter:()=>D(e),onClick:()=>{let t=h[e];R(e,t),d()},onContextMenu:e=>{e.preventDefault()}},{children:"string"==typeof w?(0,o.jsx)(w,Object.assign({ref:s,style:Object.assign(Object.assign(Object.assign({},tS(u)),tx),!n&&(null==C?void 0:C[e]))},{children:i})):(0,o.jsx)(w,Object.assign({ref:s,square:e,squareColor:t,style:Object.assign(Object.assign(Object.assign({},tS(u)),tx),!n&&(null==C?void 0:C[e]))},{children:i}))}))}let tx={display:"flex",justifyContent:"center"},tS=e=>({width:e/8,height:e/8}),tO=(e,t,r)=>(null==r?void 0:r.borderRadius)?"a1"===e?"white"===t?{borderBottomLeftRadius:r.borderRadius}:{borderTopRightRadius:r.borderRadius}:"a8"===e?"white"===t?{borderTopLeftRadius:r.borderRadius}:{borderBottomRightRadius:r.borderRadius}:"h1"===e?"white"===t?{borderBottomRightRadius:r.borderRadius}:{borderTopLeftRadius:r.borderRadius}:"h8"===e?"white"===t?{borderTopRightRadius:r.borderRadius}:{borderBottomLeftRadius:r.borderRadius}:{}:{};function t_(){let[e,t]=(0,a.useState)({}),{arePremovesAllowed:r,boardOrientation:n,boardWidth:i,currentPosition:s,id:l,premoves:u,showBoardNotation:c}=K(),d=(0,a.useMemo)(()=>{let e=[];return r?(u.forEach((t,r)=>{let{sourceSq:n,targetSq:i,piece:s}=t,o=e.find(e=>{var t;return e.piece===s&&(null==(t=e.premovesRoute.at(-1))?void 0:t.targetSq)===n});o?o.premovesRoute.push({sourceSq:n,targetSq:i,index:r}):e.push({piece:s,premovesRoute:[{sourceSq:n,targetSq:i,index:r}]})}),e):[]},[u]);return(0,o.jsx)("div",Object.assign({"data-boardid":l},{children:[...Array(8)].map((r,a)=>(0,o.jsx)("div",Object.assign({style:{display:"flex",flexWrap:"nowrap",width:i}},{children:[...Array(8)].map((r,i)=>{let l="black"===n?M[7-i]+(a+1):M[i]+(8-a),h=i%2==a%2?"white":"black",g=u.find(e=>e.sourceSq===l||e.targetSq===l),f=d.filter(({premovesRoute:e})=>{var t;return(null==(t=e.at(-1))?void 0:t.targetSq)===l}).sort((e,t)=>{var r,n;return(null==(r=t.premovesRoute.at(-1))?void 0:r.index)-(null==(n=e.premovesRoute.at(-1))?void 0:n.index)}).at(0);return(0,o.jsxs)(tC,Object.assign({square:l,squareColor:h,setSquares:t,squareHasPremove:!!g},{children:[!g&&s[l]&&(0,o.jsx)(tw,{piece:s[l],square:l,squares:e}),f&&(0,o.jsx)(tw,{isPremovedPiece:!0,piece:f.piece,square:l,squares:e}),c&&(0,o.jsx)(G,{row:a,col:i})]}),`${i}${a}`)})}),a.toString()))}))}let tE=()=>{let{arrows:e,newArrow:t,boardOrientation:r,boardWidth:n,customArrowColor:i}=K(),s=[...e,t].filter(Boolean);return(0,o.jsx)("svg",Object.assign({width:n,height:n,style:{position:"absolute",top:"0",left:"0",pointerEvents:"none",zIndex:"10"}},{children:s.map((t,s)=>{let[l,u,c]=t;if(l===u)return null;let d=z(r,n,l),h=z(r,n,u),g=n/32,f=s===e.length;e.some(e=>e[0]!==l&&e[1]===u)&&!f&&(g=n/16);let p=h.x-d.x,v=h.y-d.y,m=Math.hypot(v,p),b={x:d.x+p*(m-g)/m,y:d.y+v*(m-g)/m};return(0,o.jsxs)(a.Fragment,{children:[(0,o.jsx)("marker",Object.assign({id:`arrowhead-${s}`,markerWidth:"2",markerHeight:"2.5",refX:"1.25",refY:"1.25",orient:"auto"},{children:(0,o.jsx)("polygon",{points:"0.3 0, 2 1.25, 0.3 2.5",fill:null!=c?c:i})})),(0,o.jsx)("line",{x1:d.x,y1:d.y,x2:b.x,y2:b.y,opacity:f?"0.5":"0.65",stroke:null!=c?c:i,strokeWidth:f?.9*n/40:n/40,markerEnd:`url(#arrowhead-${s})`})]},`${l}-${u}${f?"-active":""}`)})}))};function tj({option:e}){let[t,r]=(0,a.useState)(!1),{boardWidth:n,chessPieces:i,customDarkSquareStyle:s,customLightSquareStyle:l,handleSetPosition:u,onPromotionPieceSelect:c,promoteFromSquare:d,promoteToSquare:h,promotionDialogVariant:g}=K(),f=()=>{switch(e[1]){case"Q":return s.backgroundColor;case"R":return l.backgroundColor;case"N":return"default"===g?l.backgroundColor:s.backgroundColor;case"B":return"default"===g?s.backgroundColor:l.backgroundColor}};return(0,o.jsx)("div",Object.assign({onClick:()=>{c(e,null!=d?d:void 0,null!=h?h:void 0)&&u(d,h,e,!0)},onMouseOver:()=>r(!0),onMouseOut:()=>r(!1),"data-piece":e,style:{cursor:"pointer",backgroundColor:t?f():`${f()}aa`,borderRadius:"4px",transition:"all 0.1s ease-out"}},{children:"function"==typeof i[e]?(0,o.jsx)("div",Object.assign({style:{transition:"all 0.1s ease-out",transform:t?"scale(1)":"scale(0.85)"}},{children:i[e]({squareWidth:n/8,isDragging:!1})})):(0,o.jsx)("svg",Object.assign({viewBox:"1 1 43 43",width:n/8,height:n/8,style:{transition:"all 0.1s ease-out",transform:t?"scale(1)":"scale(0.85)"}},{children:(0,o.jsx)("g",{children:i[e]})}))}))}function tk(){let{boardOrientation:e,boardWidth:t,promotionDialogVariant:r,promoteToSquare:n}=K(),i=(null==n?void 0:n[1])==="1"?"b":"w",s=[`${null!=i?i:"w"}Q`,`${null!=i?i:"w"}R`,`${null!=i?i:"w"}N`,`${null!=i?i:"w"}B`],a={default:{display:"grid",gridTemplateColumns:"1fr 1fr",transform:`translate(${-t/8}px, ${-t/8}px)`},vertical:{transform:`translate(${-t/16}px, ${-t/16}px)`},modal:{display:"flex",justifyContent:"center",alignItems:"center",transform:`translate(0px, ${3*t/8}px)`,width:"100%",height:`${t/4}px`,top:0,backgroundColor:"white",left:0}},l=z(e,t,n||"a8");return(0,o.jsx)("div",Object.assign({style:Object.assign({position:"absolute",top:`${null==l?void 0:l.y}px`,left:`${null==l?void 0:l.x}px`,zIndex:1e3},a[r]),title:"Choose promotion piece"},{children:s.map(e=>(0,o.jsx)(tj,{option:e},e))}))}let tD={whiteKing:(0,o.jsx)("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",version:"1.1",style:{shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"crisp-edges"},viewBox:"0 0 4210 12970",x:"0px",y:"0px",fillRule:"evenodd",clipRule:"evenodd",width:"250",height:"250"},{children:(0,o.jsx)("g",{children:(0,o.jsx)("path",{style:{fill:"black",fillRule:"nonzero"},d:"M2105 0c169,0 286,160 249,315l200 0c-172,266 -231,479 -256,792 315,-24 530,-86 792,-255l0 897c-265,-171 -479,-231 -792,-256 18,234 75,495 185,682l339 0c233,0 369,269 225,456l545 0 -595 1916c130,94 158,275 59,402 465,0 416,568 51,568l-334 0 465 2867 332 0c250,0 381,306 199,485 162,63 273,220 273,399l0 633 168 0 0 475c-1403,0 -2807,0 -4210,0l0 -475 167 0 0 -633c0,-179 112,-336 274,-399 -181,-178 -52,-485 199,-485l332 0 465 -2867 -335 0c-353,0 -418,-568 51,-568 -98,-127 -70,-308 59,-402l-594 -1916c181,0 363,0 545,0 -144,-187 -9,-456 225,-456l339 0c110,-187 167,-448 185,-682 -315,25 -530,87 -793,256l0 -897c266,171 480,231 793,255 -25,-315 -87,-529 -256,-792l199 0c-36,-155 81,-315 250,-315zm-1994 10012l0 253 3988 0 0 -253c-1330,0 -2659,0 -3988,0zm484 -1060c-174,0 -316,142 -316,316l0 633 3652 0 0 -633c0,-174 -142,-316 -316,-316 -1007,0 -2013,0 -3020,0zm45 -457c-230,0 -225,345 0,345l2930 0c230,0 225,-345 0,-345 -977,0 -1953,0 -2930,0zm2020 -2978l-1111 0 -465 2867 2041 0 -465 -2867zm-1558 -456c-229,0 -224,345 0,345 669,0 1337,0 2005,0 230,0 225,-345 0,-345 -668,0 -1336,0 -2005,0zm1730 -457l-1454 0c-229,0 -224,345 0,345l1454 0c229,0 224,-345 0,-345zm-2064 -1862l544 1751c529,0 1057,0 1586,0l544 -1751c-892,0 -1783,0 -2674,0zm1085 -567l504 0c-126,-247 -163,-526 -177,-800 273,15 553,52 800,177l0 -504c-247,126 -527,163 -800,177 14,-273 51,-552 177,-799 -168,0 -336,0 -504,0 125,247 162,526 177,799 -274,-14 -553,-51 -800,-177l0 504c247,-125 527,-162 800,-177 -15,274 -52,553 -177,800zm969 111l-1434 0c-230,0 -225,345 0,345l1434 0c230,0 225,-345 0,-345zm-717 -2175c-105,0 -175,109 -133,204l266 0c42,-96 -30,-205 -133,-204z"})})}))};function tT({children:e}){try{return(0,o.jsx)(o.Fragment,{children:e})}catch(e){return console.log(e),(0,o.jsx)(tI,{showError:!0})}}function tI({showError:e=!1}){return(0,o.jsxs)("div",Object.assign({style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"}},{children:[(0,o.jsx)("div",Object.assign({style:{width:250,height:250,transform:"rotate(90deg)"}},{children:tD.whiteKing})),e&&(0,o.jsx)("h1",{children:"Something went wrong"})]}))}function tL(){let e=(0,a.useRef)(null),{boardWidth:t,clearCurrentRightClickDown:r,onPromotionPieceSelect:n,setShowPromoteDialog:i,showPromoteDialog:s,customBoardStyle:l}=K();return(0,a.useEffect)(()=>{function t(t){e.current&&!e.current.contains(t.target)&&r()}return document.addEventListener("mouseup",t),()=>{document.removeEventListener("mouseup",t)}},[]),t?(0,o.jsx)("div",Object.assign({style:{perspective:"1000px"}},{children:(0,o.jsxs)("div",Object.assign({ref:e,style:Object.assign(Object.assign({position:"relative"},tP(t)),l)},{children:[(0,o.jsx)(t_,{}),(0,o.jsx)(tE,{}),s&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("div",{onClick:()=>{i(!1),null==n||n()},style:{position:"absolute",top:"0",left:"0",zIndex:"100",backgroundColor:"rgba(22,21,18,.7)",width:t,height:t}}),(0,o.jsx)(tk,{})]})]}))})):(0,o.jsx)(tI,{})}let tP=e=>({cursor:"default",height:e,width:e});!function(e){e.mouse="mouse",e.touch="touch",e.keyboard="keyboard"}(s||(s={}));class tM{get delay(){var e;return null!=(e=this.args.delay)?e:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var e;return null!=(e=this.args.ignoreContextMenu)&&e}get enableHoverOutsideTarget(){var e;return null!=(e=this.args.enableHoverOutsideTarget)&&e}get enableKeyboardEvents(){var e;return null!=(e=this.args.enableKeyboardEvents)&&e}get enableMouseEvents(){var e;return null!=(e=this.args.enableMouseEvents)&&e}get enableTouchEvents(){var e;return null==(e=this.args.enableTouchEvents)||e}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var e,t,r,n;return null!=(n=null!=(r=null==(e=this.args)?void 0:e.delayTouchStart)?r:null==(t=this.args)?void 0:t.delay)?n:0}get delayMouseStart(){var e,t,r,n;return null!=(n=null!=(r=null==(e=this.args)?void 0:e.delayMouseStart)?r:null==(t=this.args)?void 0:t.delay)?n:0}get window(){return this.context&&this.context.window?this.context.window:"undefined"!=typeof window?window:void 0}get document(){var e;return(null==(e=this.context)?void 0:e.document)?this.context.document:this.window?this.window.document:void 0}get rootElement(){var e;return(null==(e=this.args)?void 0:e.rootElement)||this.document}constructor(e,t){this.args=e,this.context=t}}let tN={Left:1},tR={Left:0};function tA(e){return void 0===e.button||e.button===tR.Left}function tq(e){return!!e.targetTouches}function tB(e,t){return tq(e)?1===e.targetTouches.length?tB(e.targetTouches[0]):t&&1===e.touches.length&&e.touches[0].target===t.target?tB(e.touches[0]):void 0:{x:e.clientX,y:e.clientY}}let tU=(()=>{let e=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get:()=>(e=!0,!0)}))}catch(e){}return e})(),tz={[s.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[s.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[s.keyboard]:{keydown:"keydown"}};class tW{profile(){var e;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:(null==(e=this.dragOverTargetIds)?void 0:e.length)||0}}get document(){return this.options.document}setup(){let e=this.options.rootElement;e&&(er(!tW.isSetUp,"Cannot have two Touch backends at the same time."),tW.isSetUp=!0,this.addEventListener(e,"start",this.getTopMoveStartHandler()),this.addEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(e,"move",this.handleTopMove),this.addEventListener(e,"move",this.handleTopMoveCapture,!0),this.addEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(e,"keydown",this.handleCancelOnEscape,!0))}teardown(){let e=this.options.rootElement;e&&(tW.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(e,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(e,"start",this.handleTopMoveStart),this.removeEventListener(e,"move",this.handleTopMoveCapture,!0),this.removeEventListener(e,"move",this.handleTopMove),this.removeEventListener(e,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(e,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(e,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(e,t,r,n=!1){let i=tU?{capture:n,passive:!1}:n;this.listenerTypes.forEach(function(n){let s=tz[n][t];s&&e.addEventListener(s,r,i)})}removeEventListener(e,t,r,n=!1){let i=tU?{capture:n,passive:!1}:n;this.listenerTypes.forEach(function(n){let s=tz[n][t];s&&e.removeEventListener(s,r,i)})}connectDragSource(e,t){let r=this.handleMoveStart.bind(this,e);return this.sourceNodes.set(e,t),this.addEventListener(t,"start",r),()=>{this.sourceNodes.delete(e),this.removeEventListener(t,"start",r)}}connectDragPreview(e,t,r){return this.sourcePreviewNodeOptions.set(e,r),this.sourcePreviewNodes.set(e,t),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDropTarget(e,t){let r=this.options.rootElement;if(!this.document||!r)return()=>{};let n=n=>{let i;if(!this.document||!r||!this.monitor.isDragging())return;switch(n.type){case tz.mouse.move:i={x:n.clientX,y:n.clientY};break;case tz.touch.move:var s,o;i={x:(null==(s=n.touches[0])?void 0:s.clientX)||0,y:(null==(o=n.touches[0])?void 0:o.clientY)||0}}let a=null!=i?this.document.elementFromPoint(i.x,i.y):void 0,l=a&&t.contains(a);if(a===t||l)return this.handleMove(n,e)};return this.addEventListener(this.document.body,"move",n),this.targetNodes.set(e,t),()=>{this.document&&(this.targetNodes.delete(e),this.removeEventListener(this.document.body,"move",n))}}getTopMoveStartHandler(){return this.options.delayTouchStart||this.options.delayMouseStart?this.handleTopMoveStartDelay:this.handleTopMoveStart}installSourceNodeRemovalObserver(e){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{e&&!e.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),e&&e.parentElement&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(e,t,r){this.getSourceClientOffset=e=>{let t=this.sourceNodes.get(e);return t&&function(e){let t=1===e.nodeType?e:e.parentElement;if(!t)return;let{top:r,left:n}=t.getBoundingClientRect();return{x:n,y:r}}(t)},this.handleTopMoveStartCapture=e=>{tA(e)&&(this.moveStartSourceIds=[])},this.handleMoveStart=e=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(e)},this.handleTopMoveStart=e=>{if(!tA(e))return;let t=tB(e);t&&(tq(e)&&(this.lastTargetTouchFallback=e.targetTouches[0]),this._mouseClientOffset=t),this.waitingForDelay=!1},this.handleTopMoveStartDelay=e=>{if(!tA(e))return;let t=e.type===tz.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,e),t),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(e,t)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(t)},this.handleTopMove=e=>{var t,r;if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;let{moveStartSourceIds:n,dragOverTargetIds:i}=this,s=this.options.enableHoverOutsideTarget,o=tB(e,this.lastTargetTouchFallback);if(!o)return;if(this._isScrolling||!this.monitor.isDragging()&&function(e,t,r,n,i){if(!i)return!1;let s=180*Math.atan2(n-t,r-e)/Math.PI+180;for(let e=0;e<i.length;++e){let t=i[e];if(t&&(null==t.start||s>=t.start)&&(null==t.end||s<=t.end))return!0}return!1}(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,o.x,o.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&n&&(t=this._mouseClientOffset.x||0,r=this._mouseClientOffset.y||0,Math.sqrt(Math.pow(Math.abs(o.x-t),2)+Math.pow(Math.abs(o.y-r),2))>(this.options.touchSlop?this.options.touchSlop:0))&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(n,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;let a=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(a),this.actions.publishDragSource(),e.cancelable&&e.preventDefault();let l=(i||[]).map(e=>this.targetNodes.get(e)).filter(e=>!!e),u=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(o.x,o.y,l):this.document.elementsFromPoint(o.x,o.y),c=[];for(let e in u){if(!u.hasOwnProperty(e))continue;let t=u[e];for(null!=t&&c.push(t);t;)(t=t.parentElement)&&-1===c.indexOf(t)&&c.push(t)}let d=c.filter(e=>l.indexOf(e)>-1).map(e=>this._getDropTargetId(e)).filter(e=>!!e).filter((e,t,r)=>r.indexOf(e)===t);if(s)for(let e in this.targetNodes){let t=this.targetNodes.get(e);if(a&&t&&t.contains(a)&&-1===d.indexOf(e)){d.unshift(e);break}}d.reverse(),this.actions.hover(d,{clientOffset:o})},this._getDropTargetId=e=>{let t=this.targetNodes.keys(),r=t.next();for(;!1===r.done;){let n=r.value;if(e===this.targetNodes.get(n))return n;r=t.next()}},this.handleTopMoveEndCapture=e=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,function(e){return void 0===e.buttons||(e.buttons&tN.Left)==0}(e)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}e.cancelable&&e.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=e=>{"Escape"===e.key&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new tM(r,t),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(s.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(s.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(s.keyboard)}}let tF=function(e,t={},r={}){return new tW(e,t,r)},tH=(0,a.createContext)({isCustomDndProviderSet:!1}),t$=({children:e})=>(0,o.jsx)(o.Fragment,{children:e}),tK=({customDndBackend:e,customDndBackendOptions:t,children:r})=>{let[n,i]=(0,a.useState)(),[s,l]=(0,a.useState)(!1),[u,c]=(0,a.useState)(!1),{isCustomDndProviderSet:d}=(0,a.useContext)(tH);return((0,a.useEffect)(()=>{c("ontouchstart"in window),l(!0),i(window)},[]),s)?n?(0,o.jsx)(d?t$:eF,Object.assign({backend:e||(u?tF:ty),context:n,options:e?t:void 0},{children:r})):(0,o.jsx)(o.Fragment,{children:r}):null};function tQ({boardContainer:e}){let{boardWidth:t,chessPieces:r,id:n,snapToCursor:i,allowDragOutsideBoard:s}=K(),{isDragging:l,item:u,clientOffset:c,sourceClientOffset:d}=function(e){let t=e8().getMonitor(),[r,n]=eQ(t,e);return(0,a.useEffect)(()=>t.subscribeToOffsetChange(n)),(0,a.useEffect)(()=>t.subscribeToStateChange(n)),r}(e=>({item:e.getItem(),clientOffset:e.getClientOffset(),sourceClientOffset:e.getSourceClientOffset(),isDragging:e.isDragging()})),h=(0,a.useCallback)((r,n)=>{if(!r||!n)return{display:"none"};let{x:o,y:a}=i?r:n,l=t/8/2;if(i&&(o-=l,a-=l),!s){let{left:r,top:n}=e,i=r+t-l,s=n+t-l;o=Math.max(r-l,Math.min(o,i)),a=Math.max(n-l,Math.min(a,s))}let u=`translate(${o}px, ${a}px)`;return{transform:u,WebkitTransform:u,touchAction:"none"}},[t,s,i,e]);return l&&u.id===n?(0,o.jsx)("div",Object.assign({style:{position:"fixed",pointerEvents:"none",zIndex:10,left:0,top:0}},{children:(0,o.jsx)("div",Object.assign({style:h(c,d)},{children:"function"==typeof r[u.piece]?r[u.piece]({squareWidth:t/8,isDragging:!0}):(0,o.jsx)("svg",Object.assign({viewBox:"1 1 43 43",width:t/8,height:t/8},{children:(0,o.jsx)("g",{children:r[u.piece]})}))}))})):null}let tG=(0,a.forwardRef)((e,t)=>{let{customDndBackend:r,customDndBackendOptions:n,onBoardWidthChange:i}=e,s=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)0>t.indexOf(n[i])&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}(e,["customDndBackend","customDndBackendOptions","onBoardWidthChange"]),[l,u]=(0,a.useState)(e.boardWidth),c=(0,a.useRef)(null),d=(0,a.useRef)(null),[h,g]=(0,a.useState)({left:0,top:0}),f=(0,a.useMemo)(()=>{var e;return null==(e=c.current)?void 0:e.getBoundingClientRect()},[c.current]);return(0,a.useEffect)(()=>{l&&(null==i||i(l))},[l]),(0,a.useEffect)(()=>{g({left:(null==f?void 0:f.left)?null==f?void 0:f.left:0,top:(null==f?void 0:f.top)?null==f?void 0:f.top:0})},[f]),(0,a.useEffect)(()=>{var t;if(void 0===e.boardWidth&&(null==(t=c.current)?void 0:t.offsetWidth)){let e=new ResizeObserver(()=>{var e;u(null==(e=c.current)?void 0:e.offsetWidth)});return e.observe(c.current),()=>{e.disconnect()}}},[c.current]),(0,o.jsx)(tT,{children:(0,o.jsxs)("div",Object.assign({ref:d,style:{display:"flex",flexDirection:"column",width:"100%"}},{children:[(0,o.jsx)("div",{ref:c,style:{width:"100%"}}),(0,o.jsx)(tK,Object.assign({customDndBackend:r,customDndBackendOptions:n},{children:l&&(0,o.jsxs)(Q,Object.assign({boardWidth:l},s,{ref:t},{children:[(0,o.jsx)(tQ,{boardContainer:h}),(0,o.jsx)(tL,{})]}))}))]}))})});var tY=r(24164);function tX({initialSeconds:e,isRunning:t,onTimeout:r,keyProp:n}){let[i,s]=(0,a.useState)(e);(0,a.useRef)(null);let l=Math.floor(i/60),u=i<10;return(0,o.jsxs)("span",{className:"font-mono text-lg",style:{color:u?"var(--danger, red)":void 0,fontWeight:u?"bold":void 0},"aria-live":"polite",children:[l,":",(i%60).toString().padStart(2,"0")]})}function tV(e){let t=Math.floor(e/60);return`${t}:${(e%60).toString().padStart(2,"0")}`}function tJ(){let[e,t]=(0,a.useState)(!1),[r,n]=(0,a.useState)(!1),[i,s]=(0,a.useState)(null),{address:u,status:c}=(0,l.DK)(),[d,h]=(0,a.useState)(new P),[g,f]=(0,a.useState)(null),[p]=(0,a.useState)(300),[v]=(0,a.useState)(300),[m,b]=(0,a.useState)("w"),[y,w]=(0,a.useState)("active"),[C,x]=(0,a.useState)(null),[S,O]=(0,a.useState)(null),[_,E]=(0,a.useState)(!1),[j,k]=(0,a.useState)(null),[D,T]=(0,a.useState)(!1);async function I(e){if("active"!==y)return;let t=new P(d.fen());console.log("[DEBUG] makeAMove - FEN before move:",d.fen(),"Move:",e);let r=t.move(e);if(console.log("[DEBUG] makeAMove - FEN after move:",t.fen(),"Move result:",r),r&&r.captured&&(k({piece:r.captured,color:"w"===r.color?"b":"w"}),T(!0),setTimeout(()=>T(!1),2e3)),h(t),r&&g){let e=t.history().length;await tY.N.from("moves").insert([{game_id:g,move_number:e,move:r.san}]),b(t.turn()),"BOT"===C&&"b"===t.turn()&&"active"===y&&setTimeout(async()=>{let e=new P(t.fen()),r=e.moves();if(r.length){let t=r[Math.floor(Math.random()*r.length)];e.move(t);let n=e.history().length;await tY.N.from("moves").insert([{game_id:g,move_number:n,move:t}]),h(e),b(e.turn())}},650)}return r}async function L(){w("timeout"),g&&await tY.N.from("games").update({status:"timeout"}).eq("id",g)}return(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",minHeight:"100vh",justifyContent:"center"},children:[(0,o.jsxs)("div",{className:"card",style:{padding:"2.5em 2em",background:"var(--card-bg)",border:"1px solid var(--accent)",boxShadow:"0 0 24px #4f8cff33",width:560,maxWidth:"98vw"},children:[j&&D&&(0,o.jsx)("div",{style:{position:"absolute",top:24,left:0,right:0,margin:"0 auto",width:80,height:80,display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,fontSize:64,opacity:+!!D,transition:"opacity 0.5s",pointerEvents:"none",color:"w"===j.color?"#fff":"#222",textShadow:"0 2px 8px #000"},children:{p:"w"===j.color?"♙":"♟",n:"w"===j.color?"♘":"♞",b:"w"===j.color?"♗":"♝",r:"w"===j.color?"♖":"♜",q:"w"===j.color?"♕":"♛",k:"w"===j.color?"♔":"♚"}[j.piece]||"?"}),g&&(0,o.jsxs)("div",{style:{marginBottom:"1em",color:"var(--accent-2)",fontFamily:"var(--font-mono)",fontSize:"1.1em"},children:["Game ID: ",g]}),"waiting"===y&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{marginBottom:"1em",color:"var(--accent)",fontWeight:600,textAlign:"center"},children:["Waiting for an opponent to join...",(0,o.jsx)("br",{}),"Share this link: ",(0,o.jsx)("span",{style:{fontFamily:"var(--font-mono)"},children:""})]}),(0,o.jsx)("button",{style:{marginBottom:24,width:"100%",background:"#ff4d4f",color:"#fff",fontWeight:700,padding:"0.75em",borderRadius:8,border:"none",fontSize:"1.1em",cursor:_?"not-allowed":"pointer",opacity:_?.7:1},disabled:_,onClick:async()=>{g&&(E(!0),await tY.N.from("games").delete().eq("id",g),window.location.href="/lobby")},children:"Leave Lobby"}),(0,o.jsxs)("div",{style:{marginTop:24,textAlign:"center"},children:[(0,o.jsx)("button",{style:{background:e?"#4caf50":"#1976d2",color:"#fff",fontWeight:700,padding:"0.75em",borderRadius:8,border:"none",fontSize:"1.1em",cursor:e?"not-allowed":"pointer",opacity:e?.7:1,marginRight:16},disabled:e,onClick:async()=>{if(!g)return;let e=u===C?"ready_black":"ready_white";await tY.N.from("games").update({[e]:!0}).eq("id",g),t(!0)},children:e?"Ready!":"I am Ready"}),(0,o.jsx)("span",{style:{marginLeft:8,color:r?"#4caf50":"#aaa",fontWeight:600},children:r?"Opponent Ready":"Waiting for Opponent"})]})]}),"ready"===y&&(0,o.jsx)("div",{style:{marginBottom:"1em",color:"var(--accent)",fontWeight:600,textAlign:"center"},children:"Both players are ready! Assigning colors and starting soon..."}),S&&S>0&&(0,o.jsxs)("div",{style:{marginBottom:"1em",color:"var(--accent)",fontWeight:600,textAlign:"center"},children:["Opponent joined! Game starting in ",S," second",1!==S?"s":"","..."]}),"connected"===c&&u&&(0,o.jsxs)("div",{style:{color:"var(--accent-2)",fontFamily:"var(--font-mono)",fontSize:"1.1em",marginBottom:"1em"},children:["Your Address: ",u.slice(0,6),"...",u.slice(-4)]})]}),(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:24,gap:32},children:[(0,o.jsxs)("div",{style:{textAlign:"center"},children:[(0,o.jsx)("span",{style:{fontWeight:700,color:"var(--accent)"},children:"White"}),(0,o.jsx)(tX,{initialSeconds:p,isRunning:"w"===m&&"active"===y,onTimeout:L,keyProp:`white-${g}`})]}),(0,o.jsxs)("div",{style:{textAlign:"center"},children:[(0,o.jsx)("span",{style:{fontWeight:700,color:"var(--accent)"},children:"Black"}),(0,o.jsx)(tX,{initialSeconds:v,isRunning:"b"===m&&"active"===y,onTimeout:L,keyProp:`black-${g}`})]})]}),(0,o.jsx)("div",{style:{marginBottom:24},children:(0,o.jsx)(tG,{position:d.fen(),onPieceDrop:function(e,t){return"active"===y&&!S&&!!new P(d.fen()).move({from:e,to:t,promotion:"q"})&&(I({from:e,to:t,promotion:"q"}),!0)},boardWidth:480,arePiecesDraggable:"active"===y&&!S&&!!C,customBoardStyle:{borderRadius:12,boxShadow:"0 0 24px #4f8cff33"}})}),(0,o.jsx)("button",{style:{marginBottom:24,width:"100%",background:"var(--accent)",color:"#fff",fontWeight:700,padding:"0.75em",borderRadius:8,border:"none",fontSize:"1.1em",cursor:"active"===y?"pointer":"not-allowed",opacity:"active"===y?1:.5},disabled:"active"!==y,onClick:async()=>{"active"===y&&g&&(await tY.N.from("games").update({status:"forfeited"}).eq("id",g),w("forfeited"))},children:"Forfeit"}),(0,o.jsx)("div",{style:{color:"var(--foreground)",fontWeight:600,textAlign:"center"},children:"active"===y?("w"===m?"White":"Black")+" to move":`Game status: ${y}`})]})}},15105:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,50772,23)),Promise.resolve().then(r.t.bind(r,73722,23)),Promise.resolve().then(r.t.bind(r,10346,23)),Promise.resolve().then(r.t.bind(r,68605,23)),Promise.resolve().then(r.t.bind(r,57545,23)),Promise.resolve().then(r.t.bind(r,89009,23)),Promise.resolve().then(r.t.bind(r,33577,23)),Promise.resolve().then(r.t.bind(r,49435,23))},15124:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>d,pages:()=>c,routeModule:()=>h,tree:()=>u});var n=r(39553),i=r(74854),s=r(23296),o=r.n(s),a=r(87047),l={};for(let e in a)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>a[e]);r.d(t,l);let u={children:["",{children:["chessboard",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,69211)),"C:\\Users\\wes7s\\chexfun\\src\\app\\chessboard\\page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,84162))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,71299)),"C:\\Users\\wes7s\\chexfun\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,75532,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,15117,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,53610,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,84162))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["C:\\Users\\wes7s\\chexfun\\src\\app\\chessboard\\page.tsx"],d={require:r,loadChunk:()=>Promise.resolve()},h=new n.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/chessboard/page",pathname:"/chessboard",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:u}})},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},21820:e=>{"use strict";e.exports=require("os")},22175:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});let n=(0,r(66057).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\wes7s\\\\chexfun\\\\src\\\\app\\\\components\\\\WalletConnectButton.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\wes7s\\chexfun\\src\\app\\components\\WalletConnectButton.tsx","default")},23673:(e,t,r)=>{"use strict";r.d(t,{default:()=>s});var n=r(56877),i=r(28484);function s(){let{login:e,logout:t}=(0,i.Zf)(),{address:r,status:s}=(0,i.DK)();return"connecting"===s||"reconnecting"===s?(0,n.jsx)("button",{style:{background:"var(--accent-2)",color:"#0d1117"},disabled:!0,title:"Connecting to wallet...",children:"\uD83D\uDD04 Connecting..."}):"connected"===s&&r?(0,n.jsxs)("button",{style:{background:"var(--success)",color:"#0d1117"},onClick:t,title:"Disconnect wallet",children:[r.slice(0,6),"...",r.slice(-4)," (Disconnect)"]}):(0,n.jsx)("button",{style:{background:"var(--accent-2)",color:"#0d1117"},onClick:e,title:"Connect your wallet",children:"Connect Wallet"})}},24164:(e,t,r)=>{"use strict";r.d(t,{N:()=>n});let n=(0,r(72781).UU)("https://ospgpgpahqgalaufcomo.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9zcGdwZ3BhaHFnYWxhdWZjb21vIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDU1NzYzMzIsImV4cCI6MjA2MTE1MjMzMn0.houQzJX0k4S9MbnPODy13rK8oIXq-QwuuRxD9lOjE9s")},27910:e=>{"use strict";e.exports=require("stream")},29021:e=>{"use strict";e.exports=require("fs")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},51159:(e,t,r)=>{Promise.resolve().then(r.bind(r,69211))},53649:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,29792,23)),Promise.resolve().then(r.bind(r,59873)),Promise.resolve().then(r.bind(r,23673))},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},59873:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var n=r(56877),i=r(28484),s=r(12892);function o({children:e}){return(0,n.jsx)(i.v_,{chain:s.g,children:e})}},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63377:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,39830,23)),Promise.resolve().then(r.bind(r,63827)),Promise.resolve().then(r.bind(r,22175))},63827:(e,t,r)=>{"use strict";r.d(t,{default:()=>n});let n=(0,r(66057).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\wes7s\\\\chexfun\\\\src\\\\app\\\\components\\\\AbstractWalletProviderWrapper.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\wes7s\\chexfun\\src\\app\\components\\AbstractWalletProviderWrapper.tsx","default")},69211:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(66057).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\Users\\\\wes7s\\\\chexfun\\\\src\\\\app\\\\chessboard\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\Users\\wes7s\\chexfun\\src\\app\\chessboard\\page.tsx","default")},71299:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>g,metadata:()=>h});var n=r(65095),i=r(81650),s=r.n(i),o=r(65108),a=r.n(o);r(11033);var l=r(63827),u=r(39830),c=r.n(u),d=r(22175);let h={title:"Pawns.fun | Challenge Chess",description:"You up for a chellenge or are yo a pawn? Put your skills to the test, new on Abstract. Pawns.fun",openGraph:{title:"Pawns.fun | Challenge Chess",description:"You up for a challenge or are you a pawn? Put your skills to the test, new on Abstract. Pawns.fun",images:[{url:"/og-image.png",width:1200,height:630,alt:"You up for a challenge or are you a pawn? Put your skills to the test, new on Abstract. Pawns.fun"}],type:"website"},twitter:{card:"summary_large_image",title:"Pawns.fun | Challenge Chess",description:"You up for a challenge or are you a pawn? Put your skills to the test, new on Abstract. Pawns.fun",images:["/og-image.png"]}};function g({children:e}){return(0,n.jsxs)("html",{lang:"en",children:[(0,n.jsxs)("head",{children:[(0,n.jsx)("link",{rel:"icon",href:"/favicon.ico"}),(0,n.jsx)("meta",{name:"theme-color",content:"#0d1117"}),(0,n.jsx)("meta",{property:"og:title",content:"Pawns.fun | Challenge Chess"}),(0,n.jsx)("meta",{property:"og:description",content:"You up for a challenge or are you a pawn? Put your skills to the test, new on Abstract. Pawns.fun"}),(0,n.jsx)("meta",{property:"og:image",content:"/og-image.png"}),(0,n.jsx)("meta",{property:"og:type",content:"website"}),(0,n.jsx)("meta",{name:"twitter:card",content:"summary_large_image"}),(0,n.jsx)("meta",{name:"twitter:title",content:"Pawns.fun | Challenge Chess"}),(0,n.jsx)("meta",{name:"twitter:description",content:"You up for a challenge or are you a pawn? Put your skills to the test, new on Abstract. Pawns.fun"}),(0,n.jsx)("meta",{name:"twitter:image",content:"/og-image.png"})]}),(0,n.jsx)("body",{className:`${s().variable} ${a().variable} antialiased`,children:(0,n.jsxs)(l.default,{children:[(0,n.jsxs)("header",{style:{background:"linear-gradient(90deg, #0d1117 70%, #4f8cff 100%)",borderBottom:"1px solid #23272f",padding:"1.5em 2em",display:"flex",alignItems:"center",justifyContent:"space-between",minHeight:"64px"},children:[(0,n.jsxs)("div",{style:{fontWeight:700,fontSize:"1.5em",color:"var(--accent)"},children:[(0,n.jsx)("span",{role:"img","aria-label":"chess",children:"♟️"})," Chex.fun"]}),(0,n.jsxs)("nav",{style:{display:"flex",gap:"2em"},children:[(0,n.jsx)(c(),{href:"/",style:{color:"var(--foreground)",textDecoration:"none",fontWeight:500},children:"Lobby"}),(0,n.jsx)(c(),{href:"/chessboard",style:{color:"var(--foreground)",textDecoration:"none",fontWeight:500},children:"Play"}),(0,n.jsx)(c(),{href:"/bets",style:{color:"var(--foreground)",textDecoration:"none",fontWeight:500},children:"Bets"})]}),(0,n.jsx)("div",{children:(0,n.jsx)(d.default,{})})]}),(0,n.jsx)("main",{style:{maxWidth:1200,margin:"2em auto",padding:"0 2em"},children:e})]})})]})}},74075:e=>{"use strict";e.exports=require("zlib")},77598:e=>{"use strict";e.exports=require("node:crypto")},78657:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,84890,23)),Promise.resolve().then(r.t.bind(r,20124,23)),Promise.resolve().then(r.t.bind(r,23296,23)),Promise.resolve().then(r.t.bind(r,62339,23)),Promise.resolve().then(r.t.bind(r,22131,23)),Promise.resolve().then(r.t.bind(r,49115,23)),Promise.resolve().then(r.t.bind(r,8971,23)),Promise.resolve().then(r.t.bind(r,65933,23))},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},84162:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(49412);let i=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,n.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[659,526,412,781],()=>r(15124));module.exports=n})();
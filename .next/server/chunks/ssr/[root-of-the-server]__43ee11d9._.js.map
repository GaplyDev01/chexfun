{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/wes7s/chexfun/src/app/core/supabaseClient.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL!;\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!;\n\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\n"],"names":[],"mappings":";;;AAAA;;AAEA,MAAM;AACN,MAAM;AAEC,MAAM,WAAW,CAAA,GAAA,iSAAA,CAAA,eAAY,AAAD,EAAE,aAAa","debugId":null}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/wes7s/chexfun/src/app/core/hooks/usePresence.ts"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { supabase } from \"../supabaseClient\";\nimport { User } from \"../../core/types\";\n\nexport function usePresence(address: string | null) {\n  const [onlineUsers, setOnlineUsers] = useState<string[]>([]);\n\n  useEffect(() => {\n    if (!address) return;\n    let interval: NodeJS.Timeout;\n    let onlineInterval: NodeJS.Timeout;\n    async function updatePresence() {\n      await supabase.from('users').update({ last_seen: new Date().toISOString() }).eq('wallet_address', address);\n    }\n    async function fetchOnlineUsers() {\n      const { data } = await supabase.from('users').select('wallet_address,last_seen');\n      const now = Date.now();\n      const online = (data || []).filter((u: any) => u.last_seen && (now - new Date(u.last_seen).getTime()) < 2 * 60 * 1000).map((u: any) => u.wallet_address);\n      setOnlineUsers(online);\n    }\n    updatePresence();\n    fetchOnlineUsers();\n    interval = setInterval(updatePresence, 30000);\n    onlineInterval = setInterval(fetchOnlineUsers, 30000);\n    return () => {\n      clearInterval(interval);\n      clearInterval(onlineInterval);\n    };\n  }, [address]);\n\n  return onlineUsers;\n}\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAGO,SAAS,YAAY,OAAsB;IAChD,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,oUAAA,CAAA,WAAQ,AAAD,EAAY,EAAE;IAE3D,CAAA,GAAA,oUAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,CAAC,SAAS;QACd,IAAI;QACJ,IAAI;QACJ,eAAe;YACb,MAAM,oIAAA,CAAA,WAAQ,CAAC,IAAI,CAAC,SAAS,MAAM,CAAC;gBAAE,WAAW,IAAI,OAAO,WAAW;YAAG,GAAG,EAAE,CAAC,kBAAkB;QACpG;QACA,eAAe;YACb,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,oIAAA,CAAA,WAAQ,CAAC,IAAI,CAAC,SAAS,MAAM,CAAC;YACrD,MAAM,MAAM,KAAK,GAAG;YACpB,MAAM,SAAS,CAAC,QAAQ,EAAE,EAAE,MAAM,CAAC,CAAC,IAAW,EAAE,SAAS,IAAI,AAAC,MAAM,IAAI,KAAK,EAAE,SAAS,EAAE,OAAO,KAAM,IAAI,KAAK,MAAM,GAAG,CAAC,CAAC,IAAW,EAAE,cAAc;YACvJ,eAAe;QACjB;QACA;QACA;QACA,WAAW,YAAY,gBAAgB;QACvC,iBAAiB,YAAY,kBAAkB;QAC/C,OAAO;YACL,cAAc;YACd,cAAc;QAChB;IACF,GAAG;QAAC;KAAQ;IAEZ,OAAO;AACT","debugId":null}},
    {"offset": {"line": 120, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/wes7s/chexfun/src/app/components/ThemeToggle.tsx"],"sourcesContent":["import React from \"react\";\n\nconst ThemeToggle: React.FC = () => {\n  const [theme, setTheme] = React.useState(() => {\n    if (typeof window !== \"undefined\") {\n      return localStorage.getItem(\"theme\") || (window.matchMedia(\"(prefers-color-scheme: dark)\").matches ? \"dark\" : \"light\");\n    }\n    return \"light\";\n  });\n\n  React.useEffect(() => {\n    document.documentElement.setAttribute(\"data-theme\", theme);\n    localStorage.setItem(\"theme\", theme);\n  }, [theme]);\n\n  return (\n    <button\n      onClick={() => setTheme(theme === \"dark\" ? \"light\" : \"dark\")}\n      style={{background:'var(--accent-2)',color:'#0d1117',borderRadius:6,padding:'6px 16px',fontWeight:600,marginLeft:8}}\n      aria-label={theme === \"dark\" ? \"Switch to light mode\" : \"Switch to dark mode\"}\n      title={theme === \"dark\" ? \"Switch to light mode\" : \"Switch to dark mode\"}\n    >\n      {theme === \"dark\" ? \"üåô Dark\" : \"‚òÄÔ∏è Light\"}\n    </button>\n  );\n};\n\nexport default ThemeToggle;\n"],"names":[],"mappings":";;;;AAAA;;;AAEA,MAAM,cAAwB;IAC5B,MAAM,CAAC,OAAO,SAAS,GAAG,oUAAA,CAAA,UAAK,CAAC,QAAQ,CAAC;QACvC,uCAAmC;;QAEnC;QACA,OAAO;IACT;IAEA,oUAAA,CAAA,UAAK,CAAC,SAAS,CAAC;QACd,SAAS,eAAe,CAAC,YAAY,CAAC,cAAc;QACpD,aAAa,OAAO,CAAC,SAAS;IAChC,GAAG;QAAC;KAAM;IAEV,qBACE,6WAAC;QACC,SAAS,IAAM,SAAS,UAAU,SAAS,UAAU;QACrD,OAAO;YAAC,YAAW;YAAkB,OAAM;YAAU,cAAa;YAAE,SAAQ;YAAW,YAAW;YAAI,YAAW;QAAC;QAClH,cAAY,UAAU,SAAS,yBAAyB;QACxD,OAAO,UAAU,SAAS,yBAAyB;kBAElD,UAAU,SAAS,YAAY;;;;;;AAGtC;uCAEe","debugId":null}},
    {"offset": {"line": 166, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/wes7s/chexfun/src/app/components/GameList.tsx"],"sourcesContent":["import React, { useState, useMemo } from \"react\";\nimport { Game } from \"../core/types\";\n\ninterface GameListProps {\n  games: Game[];\n  onlineUsers: string[];\n  onJoin: (game: Game) => void;\n  onCreateGame?: () => void;\n  loading?: boolean;\n}\n\nconst AVATAR_COLORS = [\"#4f8cff\",\"#a259ff\",\"#f24e1e\",\"#43b97f\",\"#fbbc05\",\"#ff6d00\"];\nfunction getInitials(name: string | null | undefined) {\n  if (!name) return \"?\";\n  const parts = name.split(\" \");\n  if (parts.length > 1) return parts[0][0] + parts[1][0];\n  return name.slice(0, 2).toUpperCase();\n}\nfunction Avatar({ name }: { name: string | null | undefined }) {\n  const initials = getInitials(name);\n  const color = AVATAR_COLORS[(name?.charCodeAt(0) ?? 0) % AVATAR_COLORS.length];\n  return <span style={{display:'inline-block',width:28,height:28,borderRadius:'50%',background:color,color:'#fff',textAlign:'center',lineHeight:'28px',fontWeight:600,marginRight:8}}>{initials}</span>;\n}\n\nconst GameList: React.FC<GameListProps> = React.memo(({ games, onlineUsers, onJoin, onCreateGame, loading }) => {\n  const [sort, setSort] = useState<'wager'|'rating'|'status'>('wager');\n  const sortedGames = useMemo(() => {\n    if (!games) return [];\n    switch (sort) {\n      case 'rating': return [...games].sort((a,b) => (b.white_player_rating||0) - (a.white_player_rating||0));\n      case 'status': return [...games].sort((a,b) => a.status.localeCompare(b.status));\n      default: return [...games].sort((a,b) => b.wager - a.wager);\n    }\n  }, [games, sort]);\n  if (loading) return <li style={{textAlign:'center',padding:'2em 0'}} aria-busy=\"true\">Loading games...</li>;\n  if (!sortedGames.length) {\n    return <li style={{color: 'var(--foreground)', textAlign: 'center', padding: '2em 0'}}>\n      No games available.<br/>\n      {onCreateGame && <button onClick={onCreateGame} style={{marginTop:12,background:'var(--accent-2)',color:'#0d1117',fontWeight:600,padding:'8px 20px',borderRadius:6}} aria-label=\"Create new game\" title=\"Create a new game\">+ Create Game</button>}\n    </li>;\n  }\n  return (\n    <ul style={{listStyle: 'none', padding: 0, margin: 0}}>\n      <div style={{display:'flex',alignItems:'center',margin:'8px 0 16px 0'}}>\n        <label htmlFor=\"sort-games\" style={{marginRight:8}}>Sort by:</label>\n        <select id=\"sort-games\" value={sort} onChange={e=>setSort(e.target.value as any)} style={{marginRight:16}} aria-label=\"Sort games\">\n          <option value=\"wager\">Wager</option>\n          <option value=\"rating\">Rating</option>\n          <option value=\"status\">Status</option>\n        </select>\n      </div>\n      {sortedGames.map(game => (\n        <li key={game.id} className=\"card\" tabIndex={0} style={{marginBottom: '1.5em', padding: '1em 1.5em', display: 'flex', alignItems: 'center', justifyContent: 'space-between', background: 'var(--card-bg)', border: '1px solid var(--accent)', boxShadow: '0 0 12px #4f8cff33'}}>\n          <div style={{display:'flex',alignItems:'center'}}>\n            <Avatar name={game.white_player} />\n            <span style={{fontWeight: 600, color: 'var(--accent-2)'}}>Game ID:</span> <span style={{fontFamily: 'var(--font-mono)', fontSize: '1.1em'}}>{game.id.slice(0, 8)}...</span>\n            <br />\n            <span style={{color: 'var(--foreground)', fontSize: '0.95em',marginLeft:8}}>White: <b>{game.white_player}</b> {game.white_player && onlineUsers.includes(game.white_player) ? 'üü¢' : '‚ö™'} {game.black_player ? `vs ` : ''}</span>\n            {game.black_player && <><Avatar name={game.black_player} /><span style={{fontSize:'0.95em'}}><b>{game.black_player}</b> {onlineUsers.includes(game.black_player) ? 'üü¢' : '‚ö™'}</span></>}\n          </div>\n          <button\n            style={{background: 'var(--accent-2)', color: '#0d1117', minWidth: 100}}\n            onClick={() => onJoin(game)}\n            disabled={!!game.black_player}\n            aria-label={game.black_player ? 'Game already joined' : 'Join this game'}\n            title={game.black_player ? 'This game already has two players.' : 'Join this game'}\n          >Join</button>\n        </li>\n      ))}\n    </ul>\n  );\n});\n\nexport default GameList;\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 509, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/wes7s/chexfun/src/app/components/ErrorBanner.tsx"],"sourcesContent":["import React from \"react\";\n\ninterface ErrorBannerProps {\n  message: string | null | undefined;\n}\n\nconst ErrorBanner: React.FC<ErrorBannerProps> = ({ message }) => {\n  if (!message) return null;\n  return (\n    <div className=\"error\" style={{marginBottom: '1em', background:'#ffebe9', color:'#d32f2f', padding:'8px 16px', borderRadius:4, border:'1px solid #d32f2f'}}>\n      {message}\n    </div>\n  );\n};\n\nexport default ErrorBanner;\n"],"names":[],"mappings":";;;;;AAMA,MAAM,cAA0C,CAAC,EAAE,OAAO,EAAE;IAC1D,IAAI,CAAC,SAAS,OAAO;IACrB,qBACE,6WAAC;QAAI,WAAU;QAAQ,OAAO;YAAC,cAAc;YAAO,YAAW;YAAW,OAAM;YAAW,SAAQ;YAAY,cAAa;YAAG,QAAO;QAAmB;kBACtJ;;;;;;AAGP;uCAEe","debugId":null}},
    {"offset": {"line": 540, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/wes7s/chexfun/src/app/components/LoadingSpinner.tsx"],"sourcesContent":["import React from \"react\";\n\nconst LoadingSpinner: React.FC<{ label?: string }> = ({ label }) => (\n  <div style={{display:'flex',alignItems:'center',justifyContent:'center',padding:'2em 0'}} aria-busy=\"true\">\n    <span style={{fontSize:32,marginRight:12}} role=\"status\" aria-label=\"Loading\">‚è≥</span>\n    {label && <span style={{fontSize:16}}>{label}</span>}\n  </div>\n);\n\nexport default LoadingSpinner;\n"],"names":[],"mappings":";;;;;AAEA,MAAM,iBAA+C,CAAC,EAAE,KAAK,EAAE,iBAC7D,6WAAC;QAAI,OAAO;YAAC,SAAQ;YAAO,YAAW;YAAS,gBAAe;YAAS,SAAQ;QAAO;QAAG,aAAU;;0BAClG,6WAAC;gBAAK,OAAO;oBAAC,UAAS;oBAAG,aAAY;gBAAE;gBAAG,MAAK;gBAAS,cAAW;0BAAU;;;;;;YAC7E,uBAAS,6WAAC;gBAAK,OAAO;oBAAC,UAAS;gBAAE;0BAAI;;;;;;;;;;;;uCAI5B","debugId":null}},
    {"offset": {"line": 590, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/wes7s/chexfun/src/app/components/BotPlayButton.tsx"],"sourcesContent":["import React from \"react\";\n\nconst BotPlayButton: React.FC<{ onPlay: () => void }> = ({ onPlay }) => (\n  <button\n    onClick={onPlay}\n    style={{background:'var(--accent-2)',color:'#0d1117',fontWeight:600,padding:'8px 20px',borderRadius:6,margin:'8px 0'}}\n    aria-label=\"Play vs Bot\"\n    title=\"Play a game against a computer bot\"\n  >\n    ü§ñ Play vs Bot\n  </button>\n);\n\nexport default BotPlayButton;\n"],"names":[],"mappings":";;;;;AAEA,MAAM,gBAAkD,CAAC,EAAE,MAAM,EAAE,iBACjE,6WAAC;QACC,SAAS;QACT,OAAO;YAAC,YAAW;YAAkB,OAAM;YAAU,YAAW;YAAI,SAAQ;YAAW,cAAa;YAAE,QAAO;QAAO;QACpH,cAAW;QACX,OAAM;kBACP;;;;;;uCAKY","debugId":null}},
    {"offset": {"line": 620, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/wes7s/chexfun/src/app/core/hooks/useGames.ts"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { supabase } from \"../supabaseClient\";\nimport { Game } from \"../../core/types\";\n\nexport function useGames(filters: { status?: string; minRating?: number; maxRating?: number; wager?: number }, userId?: string) {\n  const [games, setGames] = useState<Game[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    let query = supabase.from(\"games\").select(\"*\");\n    if (filters.status) query = query.eq(\"status\", filters.status);\n    if (filters.wager) {\n      query = query.gte(\"wager\", filters.wager * 0.8).lte(\"wager\", filters.wager * 1.2);\n    }\n    query.then((res: { data: Game[] | null; error: { message: string } | null }) => {\n      const { data, error } = res;\n      if (error) setError(error.message);\n      else {\n        let filtered = (data || []) as Game[];\n        if (filters.minRating !== undefined && filters.maxRating !== undefined) {\n          filtered = filtered.filter((g: Game) =>\n            (g.white_player_rating === null || (g.white_player_rating >= filters.minRating! && g.white_player_rating <= filters.maxRating!))\n          );\n        }\n        setGames(filtered);\n      }\n      setLoading(false);\n    });\n  }, [filters.status, filters.minRating, filters.maxRating, filters.wager, userId]);\n\n  return { games, loading, error };\n}\n"],"names":[],"mappings":";;;AAAA;AACA;;;AAGO,SAAS,SAAS,OAAoF,EAAE,MAAe;IAC5H,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,oUAAA,CAAA,WAAQ,AAAD,EAAU,EAAE;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,oUAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,oUAAA,CAAA,WAAQ,AAAD,EAAiB;IAElD,CAAA,GAAA,oUAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,QAAQ,oIAAA,CAAA,WAAQ,CAAC,IAAI,CAAC,SAAS,MAAM,CAAC;QAC1C,IAAI,QAAQ,MAAM,EAAE,QAAQ,MAAM,EAAE,CAAC,UAAU,QAAQ,MAAM;QAC7D,IAAI,QAAQ,KAAK,EAAE;YACjB,QAAQ,MAAM,GAAG,CAAC,SAAS,QAAQ,KAAK,GAAG,KAAK,GAAG,CAAC,SAAS,QAAQ,KAAK,GAAG;QAC/E;QACA,MAAM,IAAI,CAAC,CAAC;YACV,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG;YACxB,IAAI,OAAO,SAAS,MAAM,OAAO;iBAC5B;gBACH,IAAI,WAAY,QAAQ,EAAE;gBAC1B,IAAI,QAAQ,SAAS,KAAK,aAAa,QAAQ,SAAS,KAAK,WAAW;oBACtE,WAAW,SAAS,MAAM,CAAC,CAAC,IACzB,EAAE,mBAAmB,KAAK,QAAS,EAAE,mBAAmB,IAAI,QAAQ,SAAS,IAAK,EAAE,mBAAmB,IAAI,QAAQ,SAAS;gBAEjI;gBACA,SAAS;YACX;YACA,WAAW;QACb;IACF,GAAG;QAAC,QAAQ,MAAM;QAAE,QAAQ,SAAS;QAAE,QAAQ,SAAS;QAAE,QAAQ,KAAK;QAAE;KAAO;IAEhF,OAAO;QAAE;QAAO;QAAS;IAAM;AACjC","debugId":null}},
    {"offset": {"line": 668, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/wes7s/chexfun/src/app/lobby/page.tsx"],"sourcesContent":["\"use client\";\nimport { useEffect, useState } from \"react\";\nimport { useRouter } from \"next/navigation\";\nimport { supabase } from \"../core/supabaseClient\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { useGlobalWalletSignerAccount } from \"@abstract-foundation/agw-react\";\nimport { usePresence } from \"../core/hooks/usePresence\";\nimport {\n  TelegramShareButton,\n  TelegramIcon,\n  EmailShareButton,\n  EmailIcon,\n  TwitterShareButton,\n  XIcon,\n} from \"react-share\";\nimport { Analytics } from \"@vercel/analytics/react\";\nimport ThemeToggle from \"../components/ThemeToggle\";\nimport GameList from \"../components/GameList\";\nimport ErrorBanner from \"../components/ErrorBanner\";\nimport LoadingSpinner from \"../components/LoadingSpinner\";\nimport BotPlayButton from \"../components/BotPlayButton\";\nimport { useGames } from \"../core/hooks/useGames\";\n\nimport { User, Game } from \"../core/types\";\n\nexport default function Lobby() {\n  const router = useRouter();\n  const [wager, setWager] = useState<number>(0.01);\n  const [minRating, setMinRating] = useState<number>(0);\n  const [maxRating, setMaxRating] = useState<number>(3000);\n  const [user, setUser] = useState<User | null>(null);\n\n  const { address } = useGlobalWalletSignerAccount();\n  const onlineUsers = usePresence(address ?? null);\n  const { games, loading, error } = useGames({ status: \"waiting\", minRating, maxRating, wager }, user?.id);\n\n  useEffect(() => {\n    if (user) {\n      setMinRating(Math.max(0, user.rating - 200));\n      setMaxRating(user.rating + 200);\n    }\n  }, [user]);\n\n  useEffect(() => {\n    async function fetchUser() {\n      if (!address) return;\n      const { data: user } = await supabase\n        .from(\"users\")\n        .select(\"id, wallet_address, rating, wins, losses, total_pnl, total_wagered, created_at, last_seen\")\n        .eq(\"wallet_address\", address)\n        .single();\n      if (!user) {\n        // Create user if not exists\n        const { data: newUser } = await supabase\n          .from(\"users\")\n          .insert({ wallet_address: address })\n          .select()\n          .single();\n        setUser(newUser);\n      } else {\n        setUser(user);\n      }\n    }\n    fetchUser();\n  }, [address]);\n\n  async function createGame() {\n    if (!user) return;\n    const id = uuidv4();\n    await supabase.from(\"games\").insert([\n      {\n        id,\n        white_player: user.wallet_address,\n        white_player_id: user.id,\n        black_player: null,\n        black_player_id: null,\n        fen: \"startpos\",\n        status: \"waiting\",\n        wager: wager,\n        white_player_rating: user.rating\n      }\n    ]);\n    router.push(`/chessboard?gameId=${id}`);\n  }\n\n  // Keyboard shortcuts: N = new game, J = join\n  useEffect(() => {\n    function handleKey(e: KeyboardEvent) {\n      if (e.target && (e.target as HTMLElement).tagName === 'INPUT') return;\n      if (e.key === 'n' || e.key === 'N') {\n        createGame();\n      } else if ((e.key === 'j' || e.key === 'J') && games.length) {\n        const first = games.find(g => !g.black_player);\n        if (first) {\n          router.push(`/chessboard?gameId=${first.id}`);\n        }\n      }\n    }\n    window.addEventListener('keydown', handleKey);\n    return () => window.removeEventListener('keydown', handleKey);\n  }, [games, user]);\n\n  return (\n    <section style={{display: 'flex', flexDirection: 'column', alignItems: 'center', minHeight: '60vh'}}>\n      <div className=\"card\" style={{width: 500, maxWidth: '100%', margin: '2em 0'}}>\n        <div style={{display:'flex',alignItems:'center',justifyContent:'space-between'}}>\n          <h1 style={{fontSize: '2em', fontWeight: 700, marginBottom: '1em'}}>Game Lobby</h1>\n          <ThemeToggle />\n        </div>\n        <div style={{marginBottom: 16}}>\n          <label style={{marginRight: 8}}>Wager (ETH): </label>\n          <input type=\"number\" min={0.01} step={0.01} value={wager} onChange={e => setWager(Number(e.target.value))} style={{width: 80, marginRight: 16}} />\n          <label style={{marginRight: 8}}>Min Rating: </label>\n          <input type=\"number\" min={0} max={maxRating} value={minRating} onChange={e => setMinRating(Number(e.target.value))} style={{width: 60, marginRight: 8}} />\n          <label style={{marginRight: 8}}>Max Rating: </label>\n          <input type=\"number\" min={minRating} max={3000} value={maxRating} onChange={e => setMaxRating(Number(e.target.value))} style={{width: 60, marginRight: 16}} />\n        </div>\n        {/* Game creation and sharing UI is now modular and handled elsewhere */}\n        {loading && <LoadingSpinner label=\"Loading games...\" />}\n        <ErrorBanner message={error} />\n        <BotPlayButton onPlay={async () => {\n          if (!user) return;\n          const id = uuidv4();\n          await supabase.from(\"games\").insert([\n            {\n              id,\n              white_player: user.wallet_address,\n              white_player_id: user.id,\n              black_player: \"BOT\",\n              black_player_id: \"bot\",\n              fen: \"startpos\",\n              status: \"active\",\n              wager: 0,\n              white_player_rating: user.rating\n            }\n          ]);\n          router.push(`/chessboard?gameId=${id}`);\n        }} />\n        <ul style={{listStyle: 'none', padding: 0, margin: 0}}>\n          <GameList\n            games={games}\n            onlineUsers={onlineUsers}\n            loading={loading}\n            onCreateGame={createGame}\n            onJoin={async (game) => {\n              if (!game.black_player) {\n                await supabase.from(\"games\").update({ black_player: `guest_${Math.floor(Math.random()*10000)}`, status: \"active\" }).eq(\"id\", game.id);\n                router.push(`/chessboard?gameId=${game.id}`);\n              }\n            }}\n          />\n        </ul>\n      </div>\n      <Analytics />\n    </section>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}